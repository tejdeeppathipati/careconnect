<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CareConnect ‚Äî Real-Time Elder Care, On Your Schedule</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,400;0,700;1,300;1,400&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --blue: #1A6FD4;
  --blue-dark: #0F4FA0;
  --blue-light: #E8F0FB;
  --sky: #4FA3E8;
  --teal: #2ABFBF;
  --warm: #FF7C4A;
  --yellow: #FFD166;
  --charcoal: #1A1A2E;
  --mid: #5A6480;
  --light: #EFF2F8;
  --white: #FFFFFF;
  --border: #D8E2F3;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--white); color: var(--charcoal); overflow-x: hidden; }

nav {
  position: fixed; top: 0; width: 100%; z-index: 200;
  padding: 18px 64px;
  display: flex; justify-content: space-between; align-items: center;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--border);
}
.logo {
  font-family: 'Fraunces', serif;
  font-size: 26px; font-weight: 700;
  color: var(--blue-dark);
  display: flex; align-items: center; gap: 10px;
}
.logo-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--warm); display: inline-block; }
.nav-links { display: flex; gap: 32px; list-style: none; align-items: center; }
.nav-links a { text-decoration: none; color: var(--mid); font-size: 14px; font-weight: 500; transition: color .2s; }
.nav-links a:hover { color: var(--blue); }
.nav-btn { background: var(--blue); color: white !important; padding: 10px 26px; border-radius: 50px; font-weight: 600 !important; transition: background .2s !important; }
.nav-btn:hover { background: var(--blue-dark) !important; }

/* HERO */
.hero {
  min-height: 100vh;
  background: linear-gradient(160deg, #0F4FA0 0%, #1A6FD4 45%, #2ABFBF 100%);
  display: grid; grid-template-columns: 1fr 1fr;
  align-items: center;
  padding: 100px 64px 60px;
  position: relative; overflow: hidden;
}
.hero::before {
  content: '';
  position: absolute; inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='40' cy='40' r='1.5' fill='%23ffffff' fill-opacity='0.06'/%3E%3C/svg%3E");
}
.hero-left { position: relative; z-index: 1; animation: fadeUp .9s ease both; }
.hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.25);
  color: white; font-size: 12px; font-weight: 600;
  letter-spacing: 1px; text-transform: uppercase;
  padding: 8px 18px; border-radius: 50px; margin-bottom: 32px;
}
.live-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--yellow); animation: blink 1.4s infinite; }
h1 { font-family: 'Fraunces', serif; font-size: 62px; line-height: 1.08; font-weight: 700; color: white; margin-bottom: 24px; }
h1 em { font-style: italic; font-weight: 300; color: var(--yellow); }
.hero-sub { font-size: 17px; line-height: 1.75; color: rgba(255,255,255,0.82); max-width: 460px; margin-bottom: 44px; }
.hero-actions { display: flex; gap: 14px; align-items: center; flex-wrap: wrap; }
.btn-white {
  background: white; color: var(--blue-dark);
  padding: 15px 34px; border-radius: 50px;
  font-size: 15px; font-weight: 700; text-decoration: none;
  transition: all .25s; box-shadow: 0 8px 28px rgba(0,0,0,0.2);
}
.btn-white:hover { transform: translateY(-2px); box-shadow: 0 14px 36px rgba(0,0,0,0.25); }
.btn-ghost { color: white; font-size: 15px; font-weight: 500; text-decoration: none; display: flex; align-items: center; gap: 8px; opacity: .85; transition: opacity .2s; }
.btn-ghost:hover { opacity: 1; }
.hero-trust { display: flex; gap: 32px; margin-top: 52px; padding-top: 36px; border-top: 1px solid rgba(255,255,255,0.2); }
.trust-stat .num { font-family: 'Fraunces', serif; font-size: 34px; font-weight: 700; color: white; line-height: 1; }
.trust-stat .label { font-size: 13px; color: rgba(255,255,255,0.65); margin-top: 4px; }

.hero-right { display: flex; justify-content: center; align-items: center; position: relative; z-index: 1; animation: fadeUp 1.1s ease both; }
.phone-shell {
  background: white; border-radius: 40px; padding: 20px 16px; width: 300px;
  box-shadow: 0 40px 80px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.2);
}
.phone-notch { width: 80px; height: 10px; background: var(--charcoal); border-radius: 10px; margin: 0 auto 18px; }
.phone-screen { background: var(--light); border-radius: 24px; padding: 18px; }
.app-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.app-logo { font-family: 'Fraunces', serif; font-size: 15px; font-weight: 700; color: var(--blue-dark); }
.app-notif { background: var(--warm); color: white; font-size: 10px; font-weight: 700; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.caregiver-match { background: white; border-radius: 16px; padding: 14px; margin-bottom: 10px; border: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
.match-avatar { width: 44px; height: 44px; border-radius: 50%; background: linear-gradient(135deg, var(--sky), var(--blue)); display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
.match-info { flex: 1; }
.match-name { font-size: 13px; font-weight: 700; color: var(--charcoal); }
.match-role { font-size: 11px; color: var(--mid); margin-top: 2px; }
.match-available { background: #E6F9F0; color: #1D8A57; font-size: 10px; font-weight: 700; padding: 3px 8px; border-radius: 20px; }
.checklist-widget { background: white; border-radius: 14px; padding: 12px 14px; border: 1px solid var(--border); margin-bottom: 10px; }
.checklist-title { font-size: 11px; font-weight: 700; color: var(--mid); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 10px; }
.check-item { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--charcoal); padding: 4px 0; }
.check-box { width: 16px; height: 16px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 9px; flex-shrink: 0; }
.check-box.done { background: var(--blue); color: white; }
.check-box.pending { background: var(--light); border: 1.5px solid var(--border); }
.progress-bar { background: var(--light); border-radius: 4px; height: 6px; margin-top: 10px; overflow: hidden; }
.progress-fill { height: 100%; width: 66%; background: linear-gradient(90deg, var(--blue), var(--teal)); border-radius: 4px; }
.peace-badge { background: linear-gradient(135deg, var(--warm), #FF9A72); border-radius: 12px; padding: 10px 14px; display: flex; align-items: center; gap: 10px; }
.peace-badge span { font-size: 20px; }
.peace-badge p { font-size: 11px; color: white; font-weight: 600; }

.float-notif {
  position: absolute; left: -60px; bottom: 80px;
  background: white; border-radius: 16px; padding: 12px 16px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.15);
  display: flex; align-items: center; gap: 10px;
  animation: float 3s ease-in-out infinite; width: 220px;
}
.float-notif .emoji { font-size: 24px; }
.float-notif-text { font-size: 12px; }
.float-notif-text strong { display: block; font-size: 13px; font-weight: 700; color: var(--charcoal); }
.float-notif-text span { color: var(--mid); }

/* PROBLEM */
.problem-section { padding: 100px 64px; background: var(--charcoal); text-align: center; }
.section-eyebrow { font-size: 11px; font-weight: 700; letter-spacing: 2.5px; text-transform: uppercase; color: var(--sky); margin-bottom: 16px; }
.problem-section h2 { font-family: 'Fraunces', serif; font-size: 50px; font-weight: 300; color: white; margin-bottom: 16px; line-height: 1.1; }
.problem-section h2 em { font-style: italic; color: var(--yellow); }
.lead { font-size: 18px; color: rgba(255,255,255,0.55); max-width: 540px; margin: 0 auto 64px; line-height: 1.7; }
.pain-points { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; max-width: 900px; margin: 0 auto; }
.pain-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 32px 24px; text-align: left; transition: background .3s; }
.pain-card:hover { background: rgba(255,255,255,0.08); }
.pain-icon { font-size: 36px; margin-bottom: 16px; }
.pain-card h3 { font-size: 17px; font-weight: 700; color: white; margin-bottom: 10px; }
.pain-card p { font-size: 14px; color: rgba(255,255,255,0.5); line-height: 1.7; }

/* JOURNEY */
.journey-section { padding: 100px 64px; background: var(--light); }
.journey-section h2 { font-family: 'Fraunces', serif; font-size: 48px; font-weight: 700; text-align: center; margin-bottom: 12px; }
.journey-section h2 em { font-style: italic; color: var(--blue); font-weight: 300; }
.journey-sub { text-align: center; color: var(--mid); font-size: 16px; margin-bottom: 64px; }
.journey-steps { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; max-width: 1100px; margin: 0 auto; }
.journey-card { background: white; border-radius: 20px; padding: 28px 22px; border: 1.5px solid var(--border); transition: all .3s; }
.journey-card:hover { transform: translateY(-6px); box-shadow: 0 20px 48px rgba(26,111,212,0.1); border-color: var(--blue); }
.journey-step-num { font-family: 'Fraunces', serif; font-size: 13px; font-weight: 700; color: var(--blue); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 12px; }
.journey-icon { font-size: 36px; margin-bottom: 16px; display: block; }
.journey-card h3 { font-size: 15px; font-weight: 700; margin-bottom: 8px; color: var(--charcoal); }
.journey-card p { font-size: 13px; color: var(--mid); line-height: 1.65; }
.journey-card.highlight { border-color: var(--blue); background: var(--blue-light); }
.journey-card.highlight .journey-step-num { color: var(--blue-dark); }

/* HOW IT WORKS */
.how-section { padding: 100px 64px; }
.how-section h2 { font-family: 'Fraunces', serif; font-size: 48px; font-weight: 700; margin-bottom: 64px; }
.how-section h2 em { font-style: italic; color: var(--blue); font-weight: 300; }
.how-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; }
.how-step { display: flex; gap: 20px; padding: 28px 0; border-bottom: 1px solid var(--border); cursor: pointer; transition: padding-left .2s; }
.how-step:first-child { padding-top: 0; }
.how-step:last-child { border-bottom: none; }
.how-step:hover { padding-left: 6px; }
.how-num { width: 44px; height: 44px; border-radius: 50%; background: var(--blue-light); color: var(--blue-dark); font-family: 'Fraunces', serif; font-size: 18px; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: background .2s; }
.how-step:hover .how-num { background: var(--blue); color: white; }
.how-step-text h3 { font-size: 17px; font-weight: 700; margin-bottom: 6px; }
.how-step-text p { font-size: 14px; color: var(--mid); line-height: 1.7; }

.dashboard-preview { background: var(--charcoal); border-radius: 24px; padding: 28px; position: relative; overflow: hidden; }
.dashboard-preview::before { content: ''; position: absolute; top: -60px; right: -60px; width: 200px; height: 200px; background: radial-gradient(circle, rgba(42,191,191,0.15), transparent 70%); border-radius: 50%; }
.dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.dash-title { color: white; font-size: 16px; font-weight: 700; }
.dash-time { color: rgba(255,255,255,0.4); font-size: 13px; }
.dash-caregiver { background: rgba(255,255,255,0.07); border-radius: 16px; padding: 16px; display: flex; align-items: center; gap: 14px; margin-bottom: 16px; }
.dash-avatar { width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, var(--sky), var(--teal)); display: flex; align-items: center; justify-content: center; font-size: 22px; }
.dash-name { color: white; font-size: 15px; font-weight: 700; }
.dash-role { color: rgba(255,255,255,0.5); font-size: 12px; }
.dash-status { background: rgba(42,191,191,0.2); color: var(--teal); font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 20px; margin-left: auto; }
.dash-checklist { background: rgba(255,255,255,0.05); border-radius: 14px; padding: 16px; margin-bottom: 16px; }
.dash-cl-title { color: rgba(255,255,255,0.5); font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 14px; }
.dash-cl-item { display: flex; align-items: center; gap: 10px; color: rgba(255,255,255,0.8); font-size: 13px; padding: 7px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
.dash-cl-item:last-child { border-bottom: none; }
.dash-check { width: 18px; height: 18px; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 10px; flex-shrink: 0; }
.dash-check.done { background: var(--teal); color: white; }
.dash-check.todo { background: rgba(255,255,255,0.08); border: 1.5px solid rgba(255,255,255,0.15); }
.dash-progress { background: rgba(255,255,255,0.07); border-radius: 12px; padding: 14px; }
.dash-prog-top { display: flex; justify-content: space-between; color: rgba(255,255,255,0.6); font-size: 12px; margin-bottom: 10px; }
.dash-prog-bar { background: rgba(255,255,255,0.1); border-radius: 4px; height: 8px; overflow: hidden; }
.dash-prog-fill { height: 100%; width: 75%; background: linear-gradient(90deg, var(--blue), var(--teal)); border-radius: 4px; }

/* BOOKING */
.book-section { padding: 100px 64px; background: var(--blue-light); display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: start; }
.section-tag { display: inline-block; background: var(--blue); color: white; font-size: 11px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; padding: 6px 16px; border-radius: 50px; margin-bottom: 20px; }
.book-left h2 { font-family: 'Fraunces', serif; font-size: 44px; font-weight: 700; line-height: 1.1; margin-bottom: 16px; }
.book-left h2 em { font-style: italic; color: var(--blue); font-weight: 300; }
.book-left p { font-size: 16px; color: var(--mid); line-height: 1.7; margin-bottom: 36px; }
.guarantee-cards { display: flex; flex-direction: column; gap: 14px; }
.g-card { background: white; border-radius: 16px; padding: 18px 20px; display: flex; align-items: center; gap: 16px; border: 1px solid var(--border); }
.g-icon { font-size: 26px; flex-shrink: 0; }
.g-text strong { font-size: 14px; font-weight: 700; display: block; margin-bottom: 2px; }
.g-text span { font-size: 13px; color: var(--mid); }
.book-form { background: white; border-radius: 24px; padding: 40px; box-shadow: 0 20px 60px rgba(26,111,212,0.08); border: 1px solid var(--border); }
.book-form h3 { font-family: 'Fraunces', serif; font-size: 26px; font-weight: 700; margin-bottom: 28px; }
.form-group { margin-bottom: 18px; }
.form-group label { display: block; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: .8px; color: var(--mid); margin-bottom: 8px; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 13px 16px; border: 1.5px solid var(--border); border-radius: 12px; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 14px; color: var(--charcoal); background: white; outline: none; transition: border-color .2s; appearance: none; }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: var(--blue); }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.urgency-row { display: flex; gap: 10px; margin-bottom: 18px; }
.urgency-btn { flex: 1; padding: 10px 6px; border-radius: 10px; border: 1.5px solid var(--border); background: white; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 12px; font-weight: 600; color: var(--mid); cursor: pointer; transition: all .2s; text-align: center; }
.urgency-btn.active { background: var(--blue); color: white; border-color: var(--blue); }
.urgency-btn:hover:not(.active) { border-color: var(--blue); color: var(--blue); }
.form-submit { width: 100%; padding: 16px; background: var(--blue); color: white; border: none; border-radius: 14px; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 4px; transition: all .25s; box-shadow: 0 8px 24px rgba(26,111,212,0.3); }
.form-submit:hover { background: var(--blue-dark); transform: translateY(-2px); }

/* TESTIMONIALS */
.testimonials-section { padding: 100px 64px; background: white; }
.testimonials-section h2 { font-family: 'Fraunces', serif; font-size: 48px; font-weight: 700; margin-bottom: 12px; text-align: center; }
.testimonials-section h2 em { font-style: italic; font-weight: 300; color: var(--blue); }
.t-sub { text-align: center; color: var(--mid); margin-bottom: 56px; }
.t-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
.t-card { border: 1.5px solid var(--border); border-radius: 20px; padding: 32px 26px; transition: all .3s; }
.t-card:hover { border-color: var(--blue); box-shadow: 0 16px 40px rgba(26,111,212,0.1); }
.t-stars { color: var(--yellow); font-size: 14px; margin-bottom: 16px; }
.t-card blockquote { font-family: 'Fraunces', serif; font-size: 18px; font-style: italic; font-weight: 300; color: var(--charcoal); line-height: 1.6; margin-bottom: 24px; border: none; padding: 0; }
.t-author { display: flex; align-items: center; gap: 12px; }
.t-avatar { width: 42px; height: 42px; border-radius: 50%; background: var(--blue-light); display: flex; align-items: center; justify-content: center; font-size: 18px; }
.t-name { font-size: 14px; font-weight: 700; }
.t-info { font-size: 12px; color: var(--mid); margin-top: 2px; }

/* FINAL CTA */
.final-cta { background: linear-gradient(135deg, var(--blue-dark), var(--blue), var(--teal)); padding: 100px 64px; text-align: center; position: relative; overflow: hidden; }
.final-cta::before { content: ''; position: absolute; inset: 0; background: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='40' cy='40' r='1.5' fill='%23ffffff' fill-opacity='0.06'/%3E%3C/svg%3E"); }
.final-cta h2 { font-family: 'Fraunces', serif; font-size: 54px; font-weight: 700; color: white; margin-bottom: 16px; position: relative; }
.final-cta h2 em { font-style: italic; font-weight: 300; color: var(--yellow); }
.final-cta p { font-size: 17px; color: rgba(255,255,255,0.75); margin-bottom: 44px; position: relative; }
.cta-btns { display: flex; gap: 14px; justify-content: center; flex-wrap: wrap; position: relative; }
.btn-yellow { background: var(--yellow); color: var(--charcoal); padding: 16px 38px; border-radius: 50px; font-size: 16px; font-weight: 800; text-decoration: none; transition: all .25s; box-shadow: 0 8px 28px rgba(0,0,0,0.2); }
.btn-yellow:hover { transform: translateY(-2px); box-shadow: 0 14px 36px rgba(0,0,0,0.3); }
.btn-outline-white { color: white; padding: 16px 38px; border-radius: 50px; border: 2px solid rgba(255,255,255,0.4); font-size: 16px; font-weight: 600; text-decoration: none; transition: all .25s; }
.btn-outline-white:hover { background: rgba(255,255,255,0.1); border-color: white; }

footer { background: var(--charcoal); padding: 60px 64px 36px; }
.footer-inner { display: flex; justify-content: space-between; gap: 40px; flex-wrap: wrap; margin-bottom: 48px; }
.footer-brand .logo { color: white; margin-bottom: 14px; }
.footer-brand p { font-size: 14px; color: rgba(255,255,255,0.45); max-width: 270px; line-height: 1.7; }
.footer-col h4 { color: white; font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 18px; }
.footer-col ul { list-style: none; }
.footer-col li { margin-bottom: 10px; }
.footer-col a { color: rgba(255,255,255,0.45); text-decoration: none; font-size: 14px; transition: color .2s; }
.footer-col a:hover { color: white; }
.footer-bottom { border-top: 1px solid rgba(255,255,255,0.08); padding-top: 24px; display: flex; justify-content: space-between; font-size: 13px; color: rgba(255,255,255,0.3); flex-wrap: wrap; gap: 10px; }

.modal-overlay { display: none; position: fixed; inset: 0; z-index: 500; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); align-items: center; justify-content: center; }
.modal-overlay.open { display: flex; }
.modal { background: white; border-radius: 28px; padding: 52px 44px; max-width: 440px; width: 90%; animation: fadeUp .4s ease; text-align: center; position: relative; }
.modal-emoji { font-size: 56px; margin-bottom: 20px; }
.modal h3 { font-family: 'Fraunces', serif; font-size: 30px; font-weight: 700; margin-bottom: 10px; }
.modal p { font-size: 15px; color: var(--mid); line-height: 1.7; margin-bottom: 28px; }
.modal-close-btn { width: 100%; padding: 14px; background: var(--blue); color: white; border: none; border-radius: 12px; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 15px; font-weight: 700; cursor: pointer; transition: background .2s; }
.modal-close-btn:hover { background: var(--blue-dark); }
.modal-x { position: absolute; top: 18px; right: 22px; background: none; border: none; font-size: 22px; color: var(--mid); cursor: pointer; }

@keyframes fadeUp { from { opacity: 0; transform: translateY(28px); } to { opacity: 1; transform: translateY(0); } }
@keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
@keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
.reveal { opacity: 0; transform: translateY(22px); transition: opacity .7s ease, transform .7s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }

/* INTERACTIVE PROTOTYPE */
.prototype-section { padding: 100px 64px; background: linear-gradient(180deg, #F7FAFF 0%, #FFFFFF 55%); }
.prototype-wrap {
  border: 1.5px solid var(--border);
  border-radius: 28px;
  background: white;
  box-shadow: 0 24px 80px rgba(26,111,212,0.08);
  overflow: hidden;
}
.proto-topbar {
  display: flex; justify-content: space-between; align-items: center; gap: 16px; flex-wrap: wrap;
  padding: 18px 22px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, #fff, #f7fbff);
}
.proto-title { display: flex; flex-direction: column; gap: 4px; }
.proto-title strong { font-size: 17px; color: var(--charcoal); }
.proto-title span { font-size: 13px; color: var(--mid); }
.proto-controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.proto-role-toggle { display: inline-flex; border: 1.5px solid var(--border); border-radius: 999px; padding: 4px; background: white; }
.proto-role-toggle button {
  border: none; background: transparent; color: var(--mid); font-size: 13px; font-weight: 700;
  padding: 9px 14px; border-radius: 999px; cursor: pointer; transition: all .2s;
}
.proto-role-toggle button.active { background: var(--blue); color: white; }
.proto-btn {
  border: 1.5px solid var(--border); background: white; color: var(--charcoal); border-radius: 12px;
  padding: 10px 14px; font-size: 13px; font-weight: 700; cursor: pointer; transition: all .2s;
}
.proto-btn:hover { border-color: var(--blue); color: var(--blue); }
.proto-btn.primary { background: var(--blue); border-color: var(--blue); color: white; }
.proto-btn.primary:hover { background: var(--blue-dark); border-color: var(--blue-dark); color: white; }
.proto-grid { display: grid; grid-template-columns: 1.1fr 1.2fr 1fr; gap: 0; }
.proto-col { padding: 22px; border-right: 1px solid var(--border); min-height: 640px; background: white; }
.proto-col:last-child { border-right: none; background: #FBFDFF; }
.proto-card {
  border: 1px solid var(--border); border-radius: 16px; padding: 14px; background: white; margin-bottom: 12px;
}
.proto-card h4 { font-size: 14px; margin-bottom: 8px; }
.proto-label { display: block; font-size: 12px; font-weight: 700; color: var(--mid); margin-bottom: 6px; text-transform: uppercase; letter-spacing: .6px; }
.proto-input, .proto-select, .proto-textarea {
  width: 100%; border: 1.5px solid var(--border); border-radius: 10px; padding: 10px 12px;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 13px; color: var(--charcoal); outline: none; background: white;
}
.proto-input:focus, .proto-select:focus, .proto-textarea:focus { border-color: var(--blue); }
.proto-textarea { resize: vertical; }
.proto-filter-row, .proto-two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.proto-three-col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
.proto-pill {
  display: inline-flex; align-items: center; gap: 6px;
  border-radius: 999px; border: 1px solid var(--border);
  padding: 4px 10px; font-size: 11px; font-weight: 700; color: var(--mid); background: #FAFCFF;
}
.proto-pill.blue { border-color: #CFE0F8; background: var(--blue-light); color: var(--blue-dark); }
.proto-pill.green { border-color: #BFEBD8; background: #EAF9F2; color: #167D51; }
.proto-pill.amber { border-color: #F4DEAF; background: #FFF7E7; color: #A66A00; }
.proto-stack { display: grid; gap: 12px; }
.proto-small { font-size: 12px; color: var(--mid); line-height: 1.55; }
.proto-muted { color: var(--mid); font-size: 12px; }
.proto-section-title { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; color: var(--mid); margin-bottom: 10px; }
.proto-match {
  border: 1.5px solid var(--border); border-radius: 16px; padding: 14px; background: white;
  display: grid; gap: 10px; transition: all .2s;
}
.proto-match.active { border-color: var(--blue); box-shadow: 0 12px 28px rgba(26,111,212,0.08); }
.proto-match-header { display: flex; gap: 10px; align-items: center; }
.proto-avatar {
  width: 42px; height: 42px; border-radius: 50%;
  background: linear-gradient(135deg, var(--sky), var(--blue)); color: white;
  display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0;
}
.proto-match-name { font-size: 14px; font-weight: 700; }
.proto-match-meta { font-size: 12px; color: var(--mid); }
.proto-chip-row { display: flex; flex-wrap: wrap; gap: 6px; }
.proto-chip { background: #F4F7FC; border: 1px solid var(--border); color: var(--mid); border-radius: 999px; padding: 3px 8px; font-size: 11px; font-weight: 600; }
.proto-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.proto-actions .proto-btn { padding: 8px 12px; font-size: 12px; }
.proto-task-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.proto-task-chip {
  display: flex; align-items: center; gap: 7px; border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px;
  font-size: 12px; color: var(--charcoal); background: white;
}
.proto-task-chip input { accent-color: var(--blue); }
.proto-summary-box { background: #FBFDFF; border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px; }
.proto-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
.proto-visit-item {
  border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px; background: white;
  display: flex; justify-content: space-between; gap: 10px; align-items: center; cursor: pointer; transition: all .2s;
}
.proto-visit-item.active { border-color: var(--blue); box-shadow: inset 0 0 0 1px rgba(26,111,212,0.12); }
.proto-visit-main { display: grid; gap: 2px; }
.proto-visit-main strong { font-size: 13px; }
.proto-visit-main span { font-size: 12px; color: var(--mid); }
.proto-status {
  border-radius: 999px; padding: 4px 8px; font-size: 11px; font-weight: 700; text-transform: capitalize; white-space: nowrap;
}
.proto-status.scheduled { background: var(--blue-light); color: var(--blue-dark); }
.proto-status.in_progress { background: #FFF7E7; color: #A66A00; }
.proto-status.completed { background: #EAF9F2; color: #167D51; }
.proto-metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.proto-metric { border: 1px solid var(--border); border-radius: 12px; background: white; padding: 10px; }
.proto-metric strong { display: block; font-size: 20px; color: var(--blue-dark); line-height: 1; margin-bottom: 4px; }
.proto-metric span { font-size: 11px; color: var(--mid); }
.proto-checklist { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
.proto-checklist li { border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px; background: white; }
.proto-checklist label { display: flex; align-items: center; gap: 8px; font-size: 12px; }
.proto-checklist li.done { background: #F3FBF7; border-color: #CBEAD8; }
.proto-checklist small { display: block; margin-top: 5px; color: var(--mid); font-size: 11px; }
.proto-timeline { list-style: none; margin: 0; padding: 0; display: grid; gap: 10px; }
.proto-timeline li { display: grid; grid-template-columns: 12px 1fr; gap: 10px; align-items: start; }
.proto-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--blue); margin-top: 4px; box-shadow: 0 0 0 4px rgba(26,111,212,0.10); }
.proto-note-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
.proto-note-list li { border: 1px solid var(--border); border-radius: 10px; padding: 9px 10px; background: white; }
.proto-notification { border: 1px solid var(--border); border-radius: 12px; background: white; padding: 10px; display: grid; gap: 8px; }
.proto-notification.read { opacity: .7; background: #FAFCFF; }
.proto-inline { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.proto-review-stars { display: inline-flex; gap: 4px; }
.proto-star {
  width: 30px; height: 30px; border-radius: 8px; border: 1px solid var(--border);
  background: white; cursor: pointer; font-size: 16px; line-height: 1;
}
.proto-star.active { border-color: #F2C652; background: #FFF7D8; }
.proto-empty { border: 1px dashed var(--border); border-radius: 12px; padding: 12px; color: var(--mid); font-size: 12px; background: #FCFDFF; }
.proto-panel-title { display: flex; justify-content: space-between; gap: 10px; align-items: center; margin-bottom: 10px; }
.proto-hidden { display: none !important; }
.proto-caption { font-size: 12px; color: var(--mid); }
.proto-app-chrome {
  display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
  padding: 10px 22px; border-bottom: 1px solid var(--border); background: #F8FBFF;
}
.proto-app-dot { width: 9px; height: 9px; border-radius: 50%; background: #CFD9E8; }
.proto-app-dot:nth-child(1) { background: #FFB4A2; }
.proto-app-dot:nth-child(2) { background: #F6D365; }
.proto-app-dot:nth-child(3) { background: #8CD7AF; }
.proto-app-path { margin-left: 6px; font-size: 12px; color: var(--mid); }
.proto-grid { background: linear-gradient(180deg, #FBFDFF, #F7FAFF); }
.proto-col { background: rgba(255,255,255,0.55); }
.proto-col:last-child { background: rgba(248,251,255,0.9); }
.proto-card {
  border: 1px solid rgba(216, 226, 243, 0.95);
  border-radius: 18px;
  padding: 14px;
  background: linear-gradient(180deg, #FFFFFF, #FCFDFF);
  margin-bottom: 12px;
  box-shadow: 0 10px 28px rgba(16,34,54,0.04);
}
.proto-card--soft {
  background: linear-gradient(180deg, #FBFDFF, #F6FAFF);
}
.proto-panel-title {
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(216,226,243,0.7);
  margin-bottom: 12px;
}
.proto-section-title {
  font-size: 11px;
  letter-spacing: 1.2px;
}
.proto-card-toolbar { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
.proto-mini-btn {
  border: 1px solid var(--border); background: white; color: var(--mid);
  border-radius: 999px; font-size: 11px; font-weight: 700; padding: 5px 10px; cursor: pointer;
}
.proto-mini-btn:hover { border-color: var(--blue); color: var(--blue); }
.proto-mini-btn.active { background: var(--blue-light); border-color: #CFE0F8; color: var(--blue-dark); }
.proto-stepper {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
}
.proto-step {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: white;
  padding: 8px 10px;
  display: grid;
  gap: 3px;
}
.proto-step strong { font-size: 12px; color: var(--charcoal); }
.proto-step span { font-size: 11px; color: var(--mid); }
.proto-step.done { border-color: #BFEBD8; background: #F1FBF5; }
.proto-step.active { border-color: #CFE0F8; background: #F3F8FF; }
.proto-booking-layout {
  display: grid;
  grid-template-columns: 1.1fr .9fr;
  gap: 12px;
}
.proto-booking-main, .proto-booking-side { display: grid; gap: 12px; align-content: start; }
.proto-subcard {
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  background: white;
}
.proto-subcard-title {
  display: flex; justify-content: space-between; gap: 8px; align-items: center; margin-bottom: 8px;
}
.proto-subcard-title strong { font-size: 13px; }
.proto-recipient-card {
  display: grid;
  gap: 8px;
  border: 1px solid var(--border);
  background: #FBFDFF;
  border-radius: 12px;
  padding: 10px;
}
.proto-recipient-card .proto-chip-row { margin-top: 2px; }
.proto-quick-row { display: flex; gap: 8px; flex-wrap: wrap; }
.proto-quick-row .proto-mini-btn { padding: 7px 10px; border-radius: 10px; }
.proto-task-chip { transition: all .2s; }
.proto-task-chip:has(input:checked) {
  border-color: #CFE0F8;
  background: #F3F8FF;
}
.proto-validation {
  border: 1px solid #F2D39B;
  background: #FFF8E9;
  color: #8A5A00;
  border-radius: 12px;
  padding: 10px 12px;
  font-size: 12px;
  line-height: 1.4;
}
.proto-validation.ok {
  border-color: #BFEBD8;
  background: #F0FBF5;
  color: #167D51;
}
.proto-quote {
  border: 1px solid var(--border);
  background: linear-gradient(180deg, #FFFFFF, #F7FBFF);
  border-radius: 14px;
  padding: 12px;
  display: grid;
  gap: 10px;
}
.proto-quote-row {
  display: flex; justify-content: space-between; gap: 10px; font-size: 12px; color: var(--mid);
}
.proto-quote-row strong { color: var(--charcoal); font-size: 13px; }
.proto-divider { height: 1px; background: var(--border); }
.proto-confirm-bar {
  display: flex; gap: 8px; flex-wrap: wrap; align-items: center; justify-content: space-between;
  border: 1px solid var(--border); border-radius: 12px; background: #FBFDFF; padding: 10px;
}
.proto-confirm-bar .proto-caption { max-width: 280px; }
.proto-booking-success {
  border: 1px solid #BFEBD8;
  background: #F0FBF5;
  color: #176F4D;
  border-radius: 12px;
  padding: 10px 12px;
  font-size: 12px;
  line-height: 1.4;
}
.proto-pill.ghost { background: white; }
.proto-status.large { padding: 6px 10px; font-size: 12px; }
.proto-visit-item { align-items: flex-start; }
.proto-visit-item:hover { border-color: #CFE0F8; background: #FBFDFF; }
.proto-notification { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.5); }
.proto-notification .proto-btn { padding: 6px 10px; font-size: 11px; border-radius: 9px; }
.proto-detail-tabs {
  display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px;
}
.proto-detail-tabs span {
  padding: 5px 9px; border-radius: 999px; border: 1px solid var(--border); background: white; font-size: 11px; color: var(--mid); font-weight: 700;
}
.proto-summary-box strong { color: var(--charcoal); }

@media (max-width: 960px) {
  nav { padding: 16px 24px; }
  .nav-links { display: none; }
  .hero { grid-template-columns: 1fr; padding: 90px 24px 60px; min-height: auto; }
  h1 { font-size: 44px; }
  .hero-right, .dashboard-preview, .float-notif { display: none; }
  .problem-section, .journey-section, .how-section, .testimonials-section, .final-cta { padding: 72px 24px; }
  .pain-points, .t-grid { grid-template-columns: 1fr; }
  .journey-steps { grid-template-columns: 1fr 1fr; }
  .how-grid, .book-section { grid-template-columns: 1fr; gap: 40px; padding: 72px 24px; }
  .prototype-section { padding: 72px 24px; }
  .proto-grid { grid-template-columns: 1fr; }
  .proto-col { min-height: auto; border-right: none; border-bottom: 1px solid var(--border); }
  .proto-col:last-child { border-bottom: none; }
  .proto-filter-row, .proto-two-col, .proto-three-col, .proto-task-grid, .proto-metrics, .proto-booking-layout, .proto-stepper { grid-template-columns: 1fr; }
  footer { padding: 48px 24px 28px; }
}
</style>
</head>
<body>

<nav>
  <div class="logo"><span class="logo-dot"></span>CareConnect</div>
  <ul class="nav-links">
    <li><a href="#journey">How It Works</a></li>
    <li><a href="#how">Our Platform</a></li>
    <li><a href="#prototype">Prototype Demo</a></li>
    <li><a href="#book">Book Care</a></li>
    <li><a href="#book" class="nav-btn">Get Started Free</a></li>
  </ul>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-left">
    <div class="hero-badge"><span class="live-dot"></span> Real-time caregiver matching</div>
    <h1>When plans fall through, <em>we've got you</em></h1>
    <p class="hero-sub">Last-minute cancellation? Can't find backup? CareConnect connects working families with verified caregivers ‚Äî instantly, with live scheduling and real-time care updates sent straight to your phone.</p>
    <div class="hero-actions">
      <a href="#book" class="btn-white">Find a Caregiver Now</a>
      <a href="#journey" class="btn-ghost">See how it works ‚Üí</a>
    </div>
    <div class="hero-trust">
      <div class="trust-stat"><div class="num">2,400+</div><div class="label">Verified caregivers</div></div>
      <div class="trust-stat"><div class="num">&lt; 2hrs</div><div class="label">Avg. match time</div></div>
      <div class="trust-stat"><div class="num">98%</div><div class="label">Family satisfaction</div></div>
    </div>
  </div>
  <div class="hero-right">
    <div class="phone-shell">
      <div class="phone-notch"></div>
      <div class="phone-screen">
        <div class="app-header">
          <div class="app-logo">CareConnect</div>
          <div class="app-notif">3</div>
        </div>
        <div class="caregiver-match">
          <div class="match-avatar">üë©‚Äç‚öïÔ∏è</div>
          <div class="match-info">
            <div class="match-name">Margaret R.</div>
            <div class="match-role">Memory Care ¬∑ 4.97 ‚òÖ</div>
          </div>
          <div class="match-available">Available</div>
        </div>
        <div class="caregiver-match">
          <div class="match-avatar">üßë‚Äç‚öïÔ∏è</div>
          <div class="match-info">
            <div class="match-name">Thomas A.</div>
            <div class="match-role">Nursing Aide ¬∑ 4.94 ‚òÖ</div>
          </div>
          <div class="match-available">Available</div>
        </div>
        <div class="checklist-widget">
          <div class="checklist-title">üìã Today's Care Checklist</div>
          <div class="check-item"><div class="check-box done">‚úì</div> Morning medication</div>
          <div class="check-item"><div class="check-box done">‚úì</div> Breakfast & hydration</div>
          <div class="check-item"><div class="check-box pending"></div> Afternoon walk</div>
          <div class="check-item"><div class="check-box pending"></div> Evening check-in</div>
          <div class="progress-bar"><div class="progress-fill"></div></div>
        </div>
        <div class="peace-badge">
          <span>üòä</span>
          <p>Sarah's mom is in good hands today</p>
        </div>
      </div>
    </div>
    <div class="float-notif">
      <div class="emoji">‚úÖ</div>
      <div class="float-notif-text">
        <strong>Caregiver confirmed!</strong>
        <span>Arriving in 15 mins nearby</span>
      </div>
    </div>
  </div>
</section>

<!-- PROBLEM -->
<section class="problem-section">
  <div class="section-eyebrow reveal">The Problem We Solve</div>
  <h2 class="reveal">Sound <em>familiar?</em></h2>
  <p class="lead reveal">Millions of working adults balance full-time jobs with caring for aging parents. One cancellation can unravel everything.</p>
  <div class="pain-points">
    <div class="pain-card reveal">
      <div class="pain-icon">üòî</div>
      <h3>Caregiver cancelled ‚Äî again</h3>
      <p>You got the notification at the worst time. Now you're scrambling to figure out who can be there for your parent today.</p>
    </div>
    <div class="pain-card reveal">
      <div class="pain-icon">üìµ</div>
      <h3>No one else is available</h3>
      <p>You've texted three people. Everyone's busy. There's no backup plan and you're running out of options fast.</p>
    </div>
    <div class="pain-card reveal">
      <div class="pain-icon">üò∞</div>
      <h3>Impossible to do it all</h3>
      <p>You can't leave work. You can't leave Mom alone. You don't have time to vet someone new from scratch.</p>
    </div>
  </div>
</section>

<!-- SARAH'S JOURNEY -->
<section class="journey-section" id="journey">
  <div class="section-eyebrow reveal" style="text-align:center;">Sarah's Story ‚Äî From Our Storyboard</div>
  <h2 class="reveal">From <em>chaos</em> to calm ‚Äî in one afternoon</h2>
  <p class="journey-sub reveal">This is how thousands of families like yours found CareConnect.</p>
  <div class="journey-steps">
    <div class="journey-card reveal">
      <div class="journey-step-num">Step 01</div>
      <span class="journey-icon">üíª</span>
      <h3>The cancellation hits</h3>
      <p>Sarah works full-time and manages her mother's at-home care. She gets a notification ‚Äî her caregiver just cancelled. Panic sets in.</p>
    </div>
    <div class="journey-card reveal">
      <div class="journey-step-num">Step 02</div>
      <span class="journey-icon">üòì</span>
      <h3>Scrambling for help</h3>
      <p>She tries to find alternatives, but nobody seems available. Balancing caregiving with work feels impossible.</p>
    </div>
    <div class="journey-card highlight reveal">
      <div class="journey-step-num">Step 03</div>
      <span class="journey-icon">üì±</span>
      <h3>She discovers CareConnect</h3>
      <p>Verified caregivers with real-time scheduling. She sets up a profile and books a match in under 5 minutes.</p>
    </div>
    <div class="journey-card highlight reveal">
      <div class="journey-step-num">Step 04</div>
      <span class="journey-icon">üòä</span>
      <h3>Peace of mind restored</h3>
      <p>She tracks the caregiver's live checklist from work. Reads the care summary. Leaves a 5-star review. Mom is safe. Sarah breathes.</p>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how-section" id="how">
  <div class="section-eyebrow reveal">How It Works</div>
  <h2 class="reveal">Care at your fingertips ‚Äî <em>instantly</em></h2>
  <div class="how-grid">
    <div class="how-steps">
      <div class="how-step reveal">
        <div class="how-num">1</div>
        <div class="how-step-text">
          <h3>Tell us what you need</h3>
          <p>Share details about your loved one ‚Äî care type, schedule, special needs ‚Äî so we can find the perfect caregiver match for your family.</p>
        </div>
      </div>
      <div class="how-step reveal">
        <div class="how-num">2</div>
        <div class="how-step-text">
          <h3>Get matched in minutes</h3>
          <p>Our platform surfaces background-checked, insured caregivers available near you ‚Äî right now or scheduled ahead of time.</p>
        </div>
      </div>
      <div class="how-step reveal">
        <div class="how-num">3</div>
        <div class="how-step-text">
          <h3>Track care in real time</h3>
          <p>Your caregiver follows a personalized checklist. You get live progress updates on your phone, so you always know your loved one is safe.</p>
        </div>
      </div>
      <div class="how-step reveal">
        <div class="how-num">4</div>
        <div class="how-step-text">
          <h3>Review the daily summary</h3>
          <p>After each visit, read a full care summary. Rate your caregiver. Build a trusted circle you can count on every single time.</p>
        </div>
      </div>
    </div>
    <div class="dashboard-preview reveal">
      <div class="dash-header">
        <div class="dash-title">Today's Care Dashboard</div>
        <div class="dash-time">Live ¬∑ 2:14 PM</div>
      </div>
      <div class="dash-caregiver">
        <div class="dash-avatar">üë©‚Äç‚öïÔ∏è</div>
        <div>
          <div class="dash-name">Priya N.</div>
          <div class="dash-role">Companion & Daily Care</div>
        </div>
        <div class="dash-status">Active</div>
      </div>
      <div class="dash-checklist">
        <div class="dash-cl-title">Caregiver Checklist</div>
        <div class="dash-cl-item"><div class="dash-check done">‚úì</div> Morning medication administered</div>
        <div class="dash-cl-item"><div class="dash-check done">‚úì</div> Breakfast prepared & eaten</div>
        <div class="dash-cl-item"><div class="dash-check done">‚úì</div> Morning walk completed</div>
        <div class="dash-cl-item"><div class="dash-check todo"></div> Afternoon rest period</div>
        <div class="dash-cl-item"><div class="dash-check todo"></div> Evening meal & medication</div>
      </div>
      <div class="dash-progress">
        <div class="dash-prog-top">
          <span>Daily progress</span>
          <span style="color: var(--teal); font-weight: 700;">3 of 5 complete</span>
        </div>
        <div class="dash-prog-bar"><div class="dash-prog-fill"></div></div>
      </div>
    </div>
  </div>
</section>

<!-- BOOKING -->
<section class="book-section" id="book">
  <div class="book-left reveal">
    <div class="section-tag">Book a Caregiver</div>
    <h2>Find your <em>perfect match</em> today</h2>
    <p>Whether you need someone in two hours or two weeks, we'll connect you with a caregiver you can truly trust ‚Äî verified, insured, and ready.</p>
    <div class="guarantee-cards">
      <div class="g-card">
        <div class="g-icon">üîí</div>
        <div class="g-text"><strong>Fully Background Checked</strong><span>Every caregiver is verified, insured, and trained</span></div>
      </div>
      <div class="g-card">
        <div class="g-icon">‚ö°</div>
        <div class="g-text"><strong>Real-Time Availability</strong><span>See who's available near you, right now</span></div>
      </div>
      <div class="g-card">
        <div class="g-icon">üì≤</div>
        <div class="g-text"><strong>Live Care Updates</strong><span>Get real-time checklist progress sent to your phone</span></div>
      </div>
      <div class="g-card">
        <div class="g-icon">‚≠ê</div>
        <div class="g-text"><strong>Satisfaction Guaranteed</strong><span>Not happy? We'll find you a replacement, free</span></div>
      </div>
    </div>
  </div>
  <div class="book-form reveal">
    <h3>Request a Match</h3>
    <div class="form-group">
      <label>How urgent is your need?</label>
      <div class="urgency-row">
        <button class="urgency-btn active" onclick="setUrgency(this)">‚ö° Right now</button>
        <button class="urgency-btn" onclick="setUrgency(this)">üìÖ Today</button>
        <button class="urgency-btn" onclick="setUrgency(this)">üóì This week</button>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label>Your Name</label>
        <input type="text" placeholder="Jane Doe">
      </div>
      <div class="form-group">
        <label>Phone</label>
        <input type="tel" placeholder="(555) 000-0000">
      </div>
    </div>
    <div class="form-group">
      <label>Email Address</label>
      <input type="email" placeholder="jane@email.com">
    </div>
    <div class="form-group">
      <label>Type of Care Needed</label>
      <select>
        <option>In-Home Daily Care & Companionship</option>
        <option>Memory / Dementia Care</option>
        <option>Medical / Nursing Support</option>
        <option>Overnight Care</option>
        <option>Respite Care (caregiver relief)</option>
      </select>
    </div>
    <div class="form-group">
      <label>Your Zip Code</label>
      <input type="text" placeholder="Find caregivers near you">
    </div>
    <div class="form-group">
      <label>Tell us about your loved one</label>
      <textarea rows="3" placeholder="Any medical needs, preferences, or schedule details..."></textarea>
    </div>
    <button class="form-submit" type="button">Find My Caregiver Match ‚Üí</button>
  </div>
</section>

<!-- INTERACTIVE PROTOTYPE -->
<section class="prototype-section" id="prototype">
  <div class="section-eyebrow reveal" style="text-align:center;">Class Prototype ¬∑ Interactive Demo</div>
  <h2 class="reveal" style="font-family:'Fraunces',serif;font-size:48px;font-weight:700;text-align:center;margin-bottom:12px;">Try the <em style="font-style:italic;color:var(--blue);font-weight:300;">actual workflow</em></h2>
  <p class="journey-sub reveal" style="max-width:860px;margin-left:auto;margin-right:auto;">
    Single-file prototype for class sharing. Fictional profiles, demo trust signals, and non-medical home care coordination only.
  </p>

  <div class="prototype-wrap reveal">
    <div class="proto-app-chrome">
      <span class="proto-app-dot"></span><span class="proto-app-dot"></span><span class="proto-app-dot"></span>
      <span class="proto-app-path">CareConnect / Prototype / Shared Demo State</span>
    </div>
    <div class="proto-topbar">
      <div class="proto-title">
        <strong>CareConnect Prototype Workspace</strong>
        <span>Family and caregiver flows share the same demo state. Actions on one side update the other.</span>
      </div>
      <div class="proto-controls">
        <div class="proto-role-toggle" role="tablist" aria-label="Prototype role view">
          <button id="protoRoleFamily" type="button" class="active" data-role="family">Family view</button>
          <button id="protoRoleCaregiver" type="button" data-role="caregiver">Caregiver view</button>
        </div>
        <button class="proto-btn" type="button" id="protoResetBtn">Reset demo data</button>
      </div>
    </div>

    <div id="protoLiveMessage" class="proto-caption" style="padding:12px 22px;border-bottom:1px solid var(--border);background:#FBFDFF;" aria-live="polite">
      Family view active. Book a caregiver, then switch to caregiver view to check in and complete tasks.
    </div>

    <div class="proto-grid" id="protoFamilyView">
      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">1. Caregiver matching</div>
              <div class="proto-caption">Filter fictional caregiver profiles with demo trust signals.</div>
            </div>
          </div>
          <div class="proto-three-col" style="margin-bottom:10px;">
            <div>
              <label class="proto-label" for="protoFilterAvailability">Availability</label>
              <select id="protoFilterAvailability" class="proto-select">
                <option value="all">All</option>
                <option value="morning">Morning</option>
                <option value="day">Day</option>
                <option value="evening">Evening</option>
              </select>
            </div>
            <div>
              <label class="proto-label" for="protoFilterService">Service</label>
              <select id="protoFilterService" class="proto-select">
                <option value="all">All</option>
              </select>
            </div>
            <div>
              <label class="proto-label" for="protoFilterRating">Min rating</label>
              <select id="protoFilterRating" class="proto-select">
                <option value="0">Any</option>
                <option value="4">4.0+</option>
                <option value="4.5">4.5+</option>
              </select>
            </div>
          </div>
          <div id="protoMatchesList" class="proto-stack"></div>
        </div>

        <div class="proto-card proto-card--soft">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">2. Booking</div>
              <div class="proto-caption">Create a trackable visit with a clearer app-style scheduling flow.</div>
            </div>
          </div>
          <div id="protoBookingStepper" class="proto-stepper" style="margin-bottom:12px;"></div>

          <div class="proto-booking-layout">
            <div class="proto-booking-main">
              <div class="proto-subcard">
                <div class="proto-subcard-title">
                  <strong>Selected caregiver</strong>
                  <span class="proto-pill ghost">Step 1</span>
                </div>
                <div id="protoSelectedCaregiverSummary" class="proto-empty">Select a caregiver to prepare a booking.</div>
              </div>

              <div class="proto-subcard">
                <div class="proto-subcard-title">
                  <strong>Schedule details</strong>
                  <span class="proto-pill ghost">Step 2</span>
                </div>
                <div class="proto-recipient-card" id="protoRecipientCard"></div>
                <div class="proto-quick-row" style="margin-top:10px;">
                  <button type="button" class="proto-mini-btn" data-book-preset="next_2h">Today +2h</button>
                  <button type="button" class="proto-mini-btn" data-book-preset="today_6pm">Today 6pm</button>
                  <button type="button" class="proto-mini-btn" data-book-preset="tomorrow_9am">Tomorrow 9am</button>
                </div>
                <div class="proto-three-col" style="margin-top:10px;">
                  <div>
                    <label class="proto-label" for="protoBookVisitType">Visit type</label>
                    <select id="protoBookVisitType" class="proto-select">
                      <option value="daytime_checkin">Daytime check-in</option>
                      <option value="errands_companionship">Errands + companionship</option>
                      <option value="evening_support">Evening support</option>
                    </select>
                  </div>
                  <div>
                    <label class="proto-label" for="protoBookStart">Start</label>
                    <input id="protoBookStart" class="proto-input" type="datetime-local">
                  </div>
                  <div>
                    <label class="proto-label" for="protoBookEnd">End</label>
                    <input id="protoBookEnd" class="proto-input" type="datetime-local">
                  </div>
                </div>
              </div>

              <div class="proto-subcard">
                <div class="proto-subcard-title">
                  <strong>Tasks + notes</strong>
                  <span class="proto-pill ghost">Step 3</span>
                </div>
                <div class="proto-card-toolbar" style="margin-bottom:8px;">
                  <button type="button" class="proto-mini-btn" data-task-preset="wellness">Wellness set</button>
                  <button type="button" class="proto-mini-btn" data-task-preset="errands">Errands set</button>
                  <button type="button" class="proto-mini-btn" data-task-preset="reset">Clear tasks</button>
                </div>
                <div id="protoBookingTasks" class="proto-task-grid"></div>
                <div style="margin-top:10px;">
                  <label class="proto-label" for="protoBookNotes">Special notes</label>
                  <textarea id="protoBookNotes" class="proto-textarea" rows="3"></textarea>
                </div>
              </div>
            </div>

            <div class="proto-booking-side">
              <div id="protoBookingValidation" class="proto-validation">Complete the steps to create a demo booking.</div>
              <div id="protoBookingQuote" class="proto-quote"></div>
              <div id="protoBookingSummary" class="proto-summary-box proto-small">
                Booking summary will appear here.
              </div>
              <div id="protoBookingSuccess" class="proto-booking-success proto-hidden"></div>
              <div class="proto-confirm-bar">
                <div class="proto-caption">Creates a new visit in the family dashboard and caregiver schedule.</div>
                <div class="proto-actions">
                  <button id="protoConfirmBooking" type="button" class="proto-btn primary">Confirm booking</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">3. Family dashboard</div>
              <div class="proto-caption">Schedule, status, and accountability in one place.</div>
            </div>
          </div>
          <div id="protoMetrics" class="proto-metrics"></div>
          <div style="margin-top:12px;">
            <div class="proto-section-title">Visits</div>
            <ul id="protoFamilyVisitList" class="proto-list"></ul>
          </div>
        </div>
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">Notifications</div>
              <div class="proto-caption">Bookings, check-ins, task updates, summaries, and reviews.</div>
            </div>
          </div>
          <div id="protoNotificationsList" class="proto-stack"></div>
        </div>
      </div>

      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">4. Visit detail</div>
              <div class="proto-caption">Checklist progress, notes, summary, and review.</div>
            </div>
          </div>
          <div id="protoFamilyDetail"></div>
        </div>
      </div>
    </div>

    <div class="proto-grid proto-hidden" id="protoCaregiverView">
      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">Caregiver schedule</div>
              <div class="proto-caption">Select a visit and run the workflow.</div>
            </div>
          </div>
          <ul id="protoCaregiverVisitList" class="proto-list"></ul>
        </div>
      </div>

      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">Caregiver visit workflow</div>
              <div class="proto-caption">Check in, complete tasks, add notes, and submit summary.</div>
            </div>
          </div>
          <div id="protoCaregiverWorkflow"></div>
        </div>
      </div>

      <div class="proto-col">
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">Family-visible timeline</div>
              <div class="proto-caption">What the family sees in the dashboard and visit detail.</div>
            </div>
          </div>
          <div id="protoCaregiverTimeline"></div>
        </div>
        <div class="proto-card">
          <div class="proto-panel-title">
            <div>
              <div class="proto-section-title">Quick family preview</div>
              <div class="proto-caption">Summary and review readiness after check-out.</div>
            </div>
          </div>
          <div id="protoCaregiverFamilyPreview"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section class="testimonials-section">
  <div class="section-eyebrow reveal" style="text-align:center;">Real Families, Real Stories</div>
  <h2 class="reveal">They were in Sarah's shoes. <em>Now they're relieved.</em></h2>
  <p class="t-sub reveal">Join thousands of families who found care they can count on.</p>
  <div class="t-grid">
    <div class="t-card reveal">
      <div class="t-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
      <blockquote>My mother's caregiver cancelled with zero notice. CareConnect had someone at the door by noon. I couldn't believe how fast it worked.</blockquote>
      <div class="t-author">
        <div class="t-avatar">üë©</div>
        <div><div class="t-name">Susan H.</div><div class="t-info">Daughter of client ¬∑ Phoenix, AZ</div></div>
      </div>
    </div>
    <div class="t-card reveal">
      <div class="t-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
      <blockquote>The real-time checklist updates are everything. I'm at work and I can see exactly what the caregiver is doing. That peace of mind is priceless.</blockquote>
      <div class="t-author">
        <div class="t-avatar">üë®</div>
        <div><div class="t-name">David L.</div><div class="t-info">Son of client ¬∑ Chicago, IL</div></div>
      </div>
    </div>
    <div class="t-card reveal">
      <div class="t-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
      <blockquote>My dad refused outside help for years. Our CareConnect match won him over in one visit. The end-of-day summary keeps our whole family in the loop.</blockquote>
      <div class="t-author">
        <div class="t-avatar">üë©</div>
        <div><div class="t-name">Rachel M.</div><div class="t-info">Daughter of client ¬∑ Austin, TX</div></div>
      </div>
    </div>
  </div>
</section>

<!-- FINAL CTA -->
<section class="final-cta">
  <h2>Stop scrambling. <em>Start connecting.</em></h2>
  <p>Real-time caregivers. Live updates. Total peace of mind ‚Äî for your whole family.</p>
  <div class="cta-btns">
    <a href="#book" class="btn-yellow">Find a Caregiver Today</a>
    <a href="tel:18005551234" class="btn-outline-white">üìû (800) 555-1234</a>
  </div>
</section>

<footer>
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="logo"><span class="logo-dot"></span>CareConnect</div>
      <p>Connecting families with trusted, real-time elder care ‚Äî across the country.</p>
    </div>
    <div class="footer-col">
      <h4>Services</h4>
      <ul>
        <li><a href="#">In-Home Daily Care</a></li>
        <li><a href="#">Memory Care</a></li>
        <li><a href="#">Medical Support</a></li>
        <li><a href="#">Overnight Care</a></li>
        <li><a href="#">Respite Care</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Company</h4>
      <ul>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Become a Caregiver</a></li>
        <li><a href="#">Blog</a></li>
        <li><a href="#">Careers</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Support</h4>
      <ul>
        <li><a href="#">FAQ</a></li>
        <li><a href="#">Safety Guarantee</a></li>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms of Service</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <span>¬© 2025 CareConnect. All rights reserved.</span>
    <span>Made with ‚ô• for families like Sarah's</span>
  </div>
</footer>

<div class="modal-overlay" id="modal">
  <div class="modal">
    <button class="modal-x" onclick="closeModal()">√ó</button>
    <div class="modal-emoji">üåü</div>
    <h3>You're all set!</h3>
    <p>A CareConnect specialist will reach out within 2 hours with your caregiver matches. You're one step closer to peace of mind.</p>
    <button class="modal-close-btn" onclick="closeModal()">Got it, thank you!</button>
  </div>
</div>

<script>
  /* Existing page interactions */
  const revealEls = document.querySelectorAll('.reveal');
  const obs = new IntersectionObserver((entries) => {
    entries.forEach((e, i) => { if (e.isIntersecting) setTimeout(() => e.target.classList.add('visible'), i * 90); });
  }, { threshold: 0.08 });
  revealEls.forEach(el => obs.observe(el));

  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', ev => {
      const href = a.getAttribute('href');
      if (!href || href === '#') return;
      const t = document.querySelector(href);
      if (t) { ev.preventDefault(); t.scrollIntoView({ behavior: 'smooth' }); }
    });
  });

  window.setUrgency = function setUrgency(btn) {
    document.querySelectorAll('.urgency-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  window.openModal = function openModal() {
    document.getElementById('modal').classList.add('open');
  }
  window.closeModal = function closeModal() {
    document.getElementById('modal').classList.remove('open');
  }
  document.getElementById('modal').addEventListener('click', function(e) { if (e.target === this) closeModal(); });

  /* CareConnect single-file prototype functionality */
  const PROTO_STORAGE_KEY = 'careconnect_singlefile_prototype_v2';
  const bookingTaskTemplates = [
    'Supervised walk',
    'Grocery support',
    'Meal setup',
    'Companionship check-in',
    'Light housekeeping'
  ];

  const protoEls = {
    roleFamily: document.getElementById('protoRoleFamily'),
    roleCaregiver: document.getElementById('protoRoleCaregiver'),
    familyView: document.getElementById('protoFamilyView'),
    caregiverView: document.getElementById('protoCaregiverView'),
    resetBtn: document.getElementById('protoResetBtn'),
    liveMsg: document.getElementById('protoLiveMessage'),
    filterAvailability: document.getElementById('protoFilterAvailability'),
    filterService: document.getElementById('protoFilterService'),
    filterRating: document.getElementById('protoFilterRating'),
    matchesList: document.getElementById('protoMatchesList'),
    selectedCaregiverSummary: document.getElementById('protoSelectedCaregiverSummary'),
    bookStart: document.getElementById('protoBookStart'),
    bookEnd: document.getElementById('protoBookEnd'),
    bookingTasks: document.getElementById('protoBookingTasks'),
    bookNotes: document.getElementById('protoBookNotes'),
    bookVisitType: document.getElementById('protoBookVisitType'),
    recipientCard: document.getElementById('protoRecipientCard'),
    bookingStepper: document.getElementById('protoBookingStepper'),
    bookingValidation: document.getElementById('protoBookingValidation'),
    bookingQuote: document.getElementById('protoBookingQuote'),
    bookingSuccess: document.getElementById('protoBookingSuccess'),
    bookingSummary: document.getElementById('protoBookingSummary'),
    confirmBooking: document.getElementById('protoConfirmBooking'),
    metrics: document.getElementById('protoMetrics'),
    familyVisitList: document.getElementById('protoFamilyVisitList'),
    notificationsList: document.getElementById('protoNotificationsList'),
    familyDetail: document.getElementById('protoFamilyDetail'),
    caregiverVisitList: document.getElementById('protoCaregiverVisitList'),
    caregiverWorkflow: document.getElementById('protoCaregiverWorkflow'),
    caregiverTimeline: document.getElementById('protoCaregiverTimeline'),
    caregiverFamilyPreview: document.getElementById('protoCaregiverFamilyPreview')
  };

  function uid(prefix) {
    return prefix + '-' + Math.random().toString(36).slice(2, 9);
  }

  function nowIso() {
    return new Date().toISOString();
  }

  function plusHours(hours) {
    return new Date(Date.now() + hours * 3600 * 1000).toISOString();
  }

  function minusHours(hours) {
    return new Date(Date.now() - hours * 3600 * 1000).toISOString();
  }

  function toLocalInputValue(iso) {
    const d = new Date(iso);
    const pad = n => String(n).padStart(2, '0');
    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}`;
  }

  function formatDateTime(iso) {
    return new Date(iso).toLocaleString([], { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' });
  }

  function formatDate(iso) {
    return new Date(iso).toLocaleDateString([], { month: 'short', day: 'numeric', weekday: 'short' });
  }

  function formatTime(iso) {
    return new Date(iso).toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
  }

  function formatRange(start, end) {
    return `${formatTime(start)} - ${formatTime(end)}`;
  }

  function formatCurrency(amount) {
    return new Intl.NumberFormat([], { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(amount);
  }

  function diffHours(startIso, endIso) {
    const diff = (new Date(endIso) - new Date(startIso)) / 3600000;
    return Math.max(0, Math.round(diff * 10) / 10);
  }

  function applyBookingPreset(kind) {
    const now = new Date();
    let start = new Date();
    if (kind === 'next_2h') {
      start.setHours(start.getHours() + 2, 0, 0, 0);
    } else if (kind === 'today_6pm') {
      start.setHours(18, 0, 0, 0);
      if (start <= now) start.setDate(start.getDate() + 1);
    } else if (kind === 'tomorrow_9am') {
      start.setDate(start.getDate() + 1);
      start.setHours(9, 0, 0, 0);
    }
    const end = new Date(start.getTime() + 2 * 3600000);
    state.ui.booking.startLocal = toLocalInputValue(start.toISOString());
    state.ui.booking.endLocal = toLocalInputValue(end.toISOString());
    setLiveMessage('Booking time preset applied.');
    persistProtoState();
    renderPrototype();
  }

  function applyTaskPreset(kind) {
    const next = {};
    bookingTaskTemplates.forEach(t => { next[t] = false; });
    if (kind === 'wellness') {
      next['Supervised walk'] = true;
      next['Companionship check-in'] = true;
      next['Meal setup'] = true;
    } else if (kind === 'errands') {
      next['Grocery support'] = true;
      next['Light housekeeping'] = true;
      next['Companionship check-in'] = true;
    }
    state.ui.booking.tasks = next;
    setLiveMessage(kind === 'reset' ? 'Booking task selection cleared.' : 'Task preset applied to booking.');
    persistProtoState();
    renderPrototype();
  }

  function escapeHtml(str) {
    return String(str)
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#39;');
  }

  function clone(obj) {
    return JSON.parse(JSON.stringify(obj));
  }

  function createSeedState() {
    const caregivers = [
      {
        id: 'cg1', emoji: 'üë©‚Äç‚öïÔ∏è', name: 'Ava Martinez', rating: 4.9, reviewCount: 38, hourlyRate: 32,
        availability: ['morning', 'day'],
        services: ['Mobility support', 'Companionship', 'Medication reminders'],
        badges: ['Demo trust signal: Identity verified', 'Demo trust signal: Background check submitted']
      },
      {
        id: 'cg2', emoji: 'üßë‚Äç‚öïÔ∏è', name: 'Marcus Lee', rating: 4.7, reviewCount: 24, hourlyRate: 29,
        availability: ['day', 'evening'],
        services: ['Errands', 'Transportation support', 'Meal prep'],
        badges: ['Demo trust signal: Identity verified', 'Top reviewed']
      },
      {
        id: 'cg3', emoji: 'üë©‚Äçü¶±', name: 'Priya Shah', rating: 4.8, reviewCount: 31, hourlyRate: 30,
        availability: ['morning', 'evening'],
        services: ['Companionship', 'Light housekeeping', 'Meal prep'],
        badges: ['Demo trust signal: Background check submitted', 'Top reviewed']
      },
      {
        id: 'cg4', emoji: 'üë®‚Äç‚öïÔ∏è', name: 'Jordan Kim', rating: 4.6, reviewCount: 20, hourlyRate: 28,
        availability: ['evening'],
        services: ['Companionship', 'Errands', 'Light housekeeping'],
        badges: ['Demo trust signal: Identity verified']
      }
    ];

    const recipients = [
      { id: 'r1', name: 'Mary Johnson', needs: ['Supervised walk', 'Grocery help', 'Companionship'] }
    ];

    const visits = [
      {
        id: 'v-scheduled-1',
        caregiverId: 'cg1',
        recipientId: 'r1',
        scheduledStart: plusHours(2),
        scheduledEnd: plusHours(4),
        status: 'scheduled',
        tasks: [
          { id: 't1', label: 'Supervised walk', completed: false },
          { id: 't2', label: 'Companionship check-in', completed: false },
          { id: 't3', label: 'Meal setup', completed: false }
        ],
        notes: [],
        timeline: [
          { id: uid('evt'), type: 'booked', message: 'Visit booked with Ava Martinez.', timestamp: minusHours(1) }
        ],
        summary: null,
        specialNotes: 'Please remind Mary to use her cane before going outside.'
      },
      {
        id: 'v-completed-1',
        caregiverId: 'cg2',
        recipientId: 'r1',
        scheduledStart: minusHours(26),
        scheduledEnd: minusHours(24),
        status: 'completed',
        tasks: [
          { id: 'ct1', label: 'Grocery support', completed: true, completedAt: minusHours(25.6) },
          { id: 'ct2', label: 'Meal setup', completed: true, completedAt: minusHours(25.0) },
          { id: 'ct3', label: 'Companionship check-in', completed: true, completedAt: minusHours(24.5) }
        ],
        notes: [
          { id: uid('note'), author: 'caregiver', text: 'Mary was in good spirits. We completed groceries and reviewed meals for tomorrow.', createdAt: minusHours(24.3) }
        ],
        timeline: [
          { id: uid('evt'), type: 'booked', message: 'Visit booked with Marcus Lee.', timestamp: minusHours(30) },
          { id: uid('evt'), type: 'checked_in', message: 'Marcus Lee checked in.', timestamp: minusHours(25.9) },
          { id: uid('evt'), type: 'task_completed', message: 'Completed task: Grocery support', timestamp: minusHours(25.6) },
          { id: uid('evt'), type: 'note_added', message: 'Caregiver added a visit note.', timestamp: minusHours(24.3) },
          { id: uid('evt'), type: 'checked_out', message: 'Marcus Lee checked out.', timestamp: minusHours(24.1) },
          { id: uid('evt'), type: 'summary_submitted', message: 'End-of-visit summary submitted.', timestamp: minusHours(24.0) }
        ],
        summary: {
          text: 'Completed grocery support, meal setup, and companionship check-in. Mary had a calm afternoon and reviewed tomorrow\'s plan.',
          submittedAt: minusHours(24.0)
        },
        specialNotes: 'Please confirm hydration and fridge items.'
      }
    ];

    const reviews = [
      { id: 'rev1', visitId: 'v-completed-1', caregiverId: 'cg2', rating: 5, comment: 'Very dependable updates and clear communication.', createdAt: minusHours(23.5) }
    ];

    const notifications = [
      { id: uid('notif'), kind: 'summary', message: 'Marcus submitted an end-of-day summary for yesterday\'s visit.', createdAt: minusHours(23.9), read: false, visitId: 'v-completed-1' },
      { id: uid('notif'), kind: 'booking', message: 'Upcoming visit with Ava Martinez is scheduled for later today.', createdAt: minusHours(0.7), read: false, visitId: 'v-scheduled-1' }
    ];

    const defaultStart = plusHours(3);
    const defaultEnd = plusHours(5);

    return {
      caregivers,
      recipients,
      visits,
      reviews,
      notifications,
      ui: {
        role: 'family',
        filters: { availability: 'all', service: 'all', minRating: 0 },
        selectedCaregiverId: 'cg1',
        familyVisitId: 'v-scheduled-1',
        caregiverVisitId: 'v-scheduled-1',
        booking: {
          startLocal: toLocalInputValue(defaultStart),
          endLocal: toLocalInputValue(defaultEnd),
          visitType: 'daytime_checkin',
          tasks: {
            'Supervised walk': true,
            'Companionship check-in': true,
            'Meal setup': false,
            'Grocery support': false,
            'Light housekeeping': false
          },
          notes: 'Please text the family if Mary prefers to stay inside due to weather.'
        },
        caregiverDraftNote: '',
        reviewDrafts: {},
        lastBookedVisitId: null,
        lastBookedAt: null
      }
    };
  }

  let state = loadProtoState();

  function loadProtoState() {
    try {
      const raw = localStorage.getItem(PROTO_STORAGE_KEY);
      if (!raw) return createSeedState();
      const parsed = JSON.parse(raw);
      return normalizeLoadedState(parsed);
    } catch (err) {
      return createSeedState();
    }
  }

  function normalizeLoadedState(loaded) {
    const seed = createSeedState();
    const merged = {
      ...seed,
      ...loaded,
      ui: {
        ...seed.ui,
        ...(loaded.ui || {}),
        booking: {
          ...seed.ui.booking,
          ...((loaded.ui && loaded.ui.booking) || {}),
          tasks: {
            ...seed.ui.booking.tasks,
            ...(((loaded.ui && loaded.ui.booking && loaded.ui.booking.tasks) || {}))
          }
        },
        reviewDrafts: { ...seed.ui.reviewDrafts, ...((loaded.ui && loaded.ui.reviewDrafts) || {}) }
      }
    };
    bookingTaskTemplates.forEach(label => {
      if (typeof merged.ui.booking.tasks[label] !== 'boolean') merged.ui.booking.tasks[label] = false;
    });
    if (!merged.ui.booking.visitType) merged.ui.booking.visitType = 'daytime_checkin';
    if (!merged.ui.selectedCaregiverId) merged.ui.selectedCaregiverId = merged.caregivers[0]?.id || null;
    if (!merged.ui.familyVisitId) merged.ui.familyVisitId = merged.visits[0]?.id || null;
    if (!merged.ui.caregiverVisitId) merged.ui.caregiverVisitId = merged.visits[0]?.id || null;
    return merged;
  }

  function persistProtoState() {
    localStorage.setItem(PROTO_STORAGE_KEY, JSON.stringify(state));
  }

  function setLiveMessage(msg) {
    protoEls.liveMsg.textContent = msg;
  }

  function getCaregiver(id) {
    return state.caregivers.find(c => c.id === id);
  }

  function getRecipient(id) {
    return state.recipients.find(r => r.id === id);
  }

  function getVisit(id) {
    return state.visits.find(v => v.id === id);
  }

  function sortVisitsByStartAsc(list) {
    return [...list].sort((a, b) => new Date(a.scheduledStart) - new Date(b.scheduledStart));
  }

  function sortByCreatedDesc(list, field) {
    return [...list].sort((a, b) => new Date(b[field]) - new Date(a[field]));
  }

  function addNotification(kind, message, visitId) {
    state.notifications.unshift({ id: uid('notif'), kind, message, createdAt: nowIso(), read: false, visitId });
  }

  function pushTimeline(visit, type, message) {
    visit.timeline.push({ id: uid('evt'), type, message, timestamp: nowIso() });
  }

  function updateRole(role) {
    state.ui.role = role;
    setLiveMessage(role === 'family'
      ? 'Family view active. Book a caregiver, then switch to caregiver view to check in and complete tasks.'
      : 'Caregiver view active. Actions here update the family dashboard and visit detail instantly.');
    persistProtoState();
    renderPrototype();
  }

  function filteredCaregivers() {
    const f = state.ui.filters;
    return state.caregivers.filter(c => {
      if (f.availability !== 'all' && !c.availability.includes(f.availability)) return false;
      if (f.service !== 'all' && !c.services.includes(f.service)) return false;
      if (Number(f.minRating || 0) && c.rating < Number(f.minRating)) return false;
      return true;
    });
  }

  function confirmBooking() {
    const caregiver = getCaregiver(state.ui.selectedCaregiverId);
    if (!caregiver) {
      setLiveMessage('Select a caregiver match before booking.');
      return;
    }
    const start = new Date(state.ui.booking.startLocal);
    const end = new Date(state.ui.booking.endLocal);
    if (Number.isNaN(start.getTime()) || Number.isNaN(end.getTime()) || end <= start) {
      setLiveMessage('Please choose a valid start and end time for the visit.');
      return;
    }
    const taskLabels = bookingTaskTemplates.filter(label => state.ui.booking.tasks[label]);
    const visitId = uid('visit');
    const recipient = state.recipients[0];
    const visit = {
      id: visitId,
      caregiverId: caregiver.id,
      recipientId: recipient.id,
      scheduledStart: start.toISOString(),
      scheduledEnd: end.toISOString(),
      status: 'scheduled',
      tasks: (taskLabels.length ? taskLabels : ['Companionship check-in']).map(label => ({ id: uid('task'), label, completed: false })),
      notes: [],
      timeline: [{ id: uid('evt'), type: 'booked', message: `Visit booked with ${caregiver.name}.`, timestamp: nowIso() }],
      summary: null,
      specialNotes: state.ui.booking.notes,
      visitType: state.ui.booking.visitType || 'daytime_checkin'
    };
    state.visits.unshift(visit);
    state.ui.familyVisitId = visitId;
    state.ui.caregiverVisitId = visitId;
    state.ui.lastBookedVisitId = visitId;
    state.ui.lastBookedAt = nowIso();
    addNotification('booking', `Booking confirmed with ${caregiver.name} for ${formatDateTime(visit.scheduledStart)}.`, visitId);
    setLiveMessage('Booking created. Dashboard and caregiver schedule were updated. Switch to caregiver view to check in.');
    persistProtoState();
    renderPrototype();
  }

  function checkInVisit(visitId) {
    const visit = getVisit(visitId);
    if (!visit || visit.status !== 'scheduled') return;
    const caregiver = getCaregiver(visit.caregiverId);
    visit.status = 'in_progress';
    pushTimeline(visit, 'checked_in', `${caregiver ? caregiver.name : 'Caregiver'} checked in.`);
    addNotification('visit_status', `${caregiver ? caregiver.name : 'Caregiver'} checked in for the visit.`, visit.id);
    state.ui.familyVisitId = visit.id;
    setLiveMessage('Caregiver checked in. Family dashboard and visit detail updated.');
    persistProtoState();
    renderPrototype();
  }

  function toggleVisitTask(visitId, taskId, completed) {
    const visit = getVisit(visitId);
    if (!visit || visit.status === 'completed') return;
    const task = visit.tasks.find(t => t.id === taskId);
    if (!task) return;
    const next = typeof completed === 'boolean' ? completed : !task.completed;
    const changed = next !== task.completed;
    task.completed = next;
    task.completedAt = next ? nowIso() : null;
    if (changed && next) {
      pushTimeline(visit, 'task_completed', `Completed task: ${task.label}`);
      addNotification('task_update', `Task completed: ${task.label}`, visit.id);
      setLiveMessage(`Task completed: ${task.label}`);
    }
    persistProtoState();
    renderPrototype();
  }

  function addVisitNote(visitId, text) {
    const visit = getVisit(visitId);
    if (!visit || !text.trim() || visit.status === 'completed') return;
    visit.notes.push({ id: uid('note'), author: 'caregiver', text: text.trim(), createdAt: nowIso() });
    pushTimeline(visit, 'note_added', 'Caregiver added a visit note.');
    addNotification('task_update', 'Caregiver posted a visit note update.', visit.id);
    state.ui.caregiverDraftNote = '';
    setLiveMessage('Caregiver note added and visible in the family view.');
    persistProtoState();
    renderPrototype();
  }

  function checkOutAndSubmitSummary(visitId) {
    const visit = getVisit(visitId);
    if (!visit || visit.status !== 'in_progress') return;
    const completed = visit.tasks.filter(t => t.completed);
    if (completed.length < 1) {
      setLiveMessage('Complete at least one task before check-out (prototype accountability rule).');
      return;
    }
    const latestNote = [...visit.notes].reverse().find(n => n.author === 'caregiver');
    visit.status = 'completed';
    pushTimeline(visit, 'checked_out', `${getCaregiver(visit.caregiverId)?.name || 'Caregiver'} checked out.`);
    visit.summary = {
      text: `Completed ${completed.map(t => t.label).join(', ')}. ${latestNote ? `Caregiver note: ${latestNote.text}` : 'No additional issues reported.'}`,
      submittedAt: nowIso()
    };
    pushTimeline(visit, 'summary_submitted', 'End-of-visit summary submitted.');
    addNotification('summary', 'End-of-visit summary is ready to review.', visit.id);
    setLiveMessage('Visit completed and summary submitted. Family review is now enabled.');
    persistProtoState();
    renderPrototype();
  }

  function submitReview(visitId, rating, comment) {
    const visit = getVisit(visitId);
    if (!visit || !visit.summary || visit.status !== 'completed') return;
    if (state.reviews.some(r => r.visitId === visitId)) return;
    const caregiver = getCaregiver(visit.caregiverId);
    const cleanComment = (comment || '').trim();
    state.reviews.unshift({ id: uid('review'), visitId, caregiverId: visit.caregiverId, rating, comment: cleanComment || 'Great communication and dependable updates.', createdAt: nowIso() });
    if (caregiver) {
      const total = caregiver.rating * caregiver.reviewCount + rating;
      caregiver.reviewCount += 1;
      caregiver.rating = Math.round((total / caregiver.reviewCount) * 10) / 10;
    }
    addNotification('review', 'Family review submitted successfully.', visitId);
    setLiveMessage('Review submitted. Caregiver rating updated in the match list.');
    persistProtoState();
    renderPrototype();
  }

  function markNotifRead(id) {
    const n = state.notifications.find(item => item.id === id);
    if (!n) return;
    n.read = true;
    persistProtoState();
    renderPrototype();
  }

  function getStats() {
    const visits = state.visits;
    const completedVisits = visits.filter(v => v.status === 'completed').length;
    const onTimeCheckIns = visits.filter(v => {
      const checkIn = v.timeline.find(evt => evt.type === 'checked_in');
      if (!checkIn) return false;
      return (new Date(checkIn.timestamp) - new Date(v.scheduledStart)) <= 15 * 60 * 1000;
    }).length;
    const doneTasks = visits.reduce((acc, v) => acc + v.tasks.filter(t => t.completed).length, 0);
    const totalTasks = visits.reduce((acc, v) => acc + v.tasks.length, 0);
    const completionRate = totalTasks ? Math.round((doneTasks / totalTasks) * 100) : 0;
    return { completedVisits, onTimeCheckIns, completionRate };
  }

  function renderPrototype() {
    protoEls.roleFamily.classList.toggle('active', state.ui.role === 'family');
    protoEls.roleCaregiver.classList.toggle('active', state.ui.role === 'caregiver');
    protoEls.familyView.classList.toggle('proto-hidden', state.ui.role !== 'family');
    protoEls.caregiverView.classList.toggle('proto-hidden', state.ui.role !== 'caregiver');

    renderFilterControls();
    renderMatches();
    renderBookingPanel();
    renderFamilyDashboard();
    renderFamilyDetail();
    renderCaregiverSchedule();
    renderCaregiverWorkflow();
    renderCaregiverTimeline();
    renderCaregiverFamilyPreview();
  }

  function renderFilterControls() {
    protoEls.filterAvailability.value = state.ui.filters.availability;
    protoEls.filterRating.value = String(state.ui.filters.minRating);
    const allServices = Array.from(new Set(state.caregivers.flatMap(c => c.services)));
    const current = state.ui.filters.service;
    protoEls.filterService.innerHTML = '<option value="all">All</option>' + allServices.map(s => `<option value="${escapeHtml(s)}">${escapeHtml(s)}</option>`).join('');
    if (allServices.includes(current)) protoEls.filterService.value = current;
    else protoEls.filterService.value = 'all';
  }

  function renderMatches() {
    const matches = filteredCaregivers();
    if (!matches.length) {
      protoEls.matchesList.innerHTML = '<div class="proto-empty">No caregivers match the selected filters. Try changing availability, service, or rating.</div>';
      return;
    }
    protoEls.matchesList.innerHTML = matches.map(c => `
      <div class="proto-match ${state.ui.selectedCaregiverId === c.id ? 'active' : ''}" data-caregiver-id="${c.id}">
        <div class="proto-match-header">
          <div class="proto-avatar">${c.emoji}</div>
          <div style="flex:1;">
            <div class="proto-match-name">${escapeHtml(c.name)}</div>
            <div class="proto-match-meta">${c.rating.toFixed(1)} ‚òÖ (${c.reviewCount}) ¬∑ $${c.hourlyRate}/hr</div>
          </div>
          <span class="proto-pill green">Available</span>
        </div>
        <div class="proto-chip-row">
          ${c.availability.map(slot => `<span class="proto-pill blue">${escapeHtml(slot)}</span>`).join('')}
        </div>
        <div class="proto-chip-row">
          ${c.services.map(s => `<span class="proto-chip">${escapeHtml(s)}</span>`).join('')}
        </div>
        <div class="proto-stack">
          ${c.badges.map(b => `<div class="proto-small">‚Ä¢ ${escapeHtml(b)}</div>`).join('')}
        </div>
        <div class="proto-actions">
          <button class="proto-btn primary" type="button" data-action="select-caregiver" data-caregiver-id="${c.id}">Select for booking</button>
        </div>
      </div>
    `).join('');
  }

  function renderBookingPanel() {
    const caregiver = getCaregiver(state.ui.selectedCaregiverId);
    const recipient = state.recipients[0];
    protoEls.bookStart.value = state.ui.booking.startLocal;
    protoEls.bookEnd.value = state.ui.booking.endLocal;
    protoEls.bookNotes.value = state.ui.booking.notes;
    if (protoEls.bookVisitType) protoEls.bookVisitType.value = state.ui.booking.visitType || 'daytime_checkin';

    const visitTypeLabels = {
      daytime_checkin: 'Daytime check-in',
      errands_companionship: 'Errands + companionship',
      evening_support: 'Evening support'
    };

    protoEls.recipientCard.innerHTML = `
      <div class="proto-inline" style="justify-content:space-between;">
        <strong>${escapeHtml(recipient.name)}</strong>
        <span class="proto-pill blue">Fictional demo profile</span>
      </div>
      <div class="proto-caption">Non-medical home care coordination for a working family in NOVA.</div>
      <div class="proto-chip-row">
        ${recipient.needs.map(n => `<span class="proto-chip">${escapeHtml(n)}</span>`).join('')}
      </div>
    `;

    if (!caregiver) {
      protoEls.selectedCaregiverSummary.className = 'proto-empty';
      protoEls.selectedCaregiverSummary.textContent = 'Select a caregiver to prepare a booking.';
    } else {
      protoEls.selectedCaregiverSummary.className = 'proto-summary-box proto-small';
      protoEls.selectedCaregiverSummary.innerHTML = `
        <strong>${escapeHtml(caregiver.name)}</strong> ¬∑ ${caregiver.rating.toFixed(1)} ‚òÖ ¬∑ ${escapeHtml(caregiver.services.slice(0, 2).join(', '))}
        <div class="proto-caption" style="margin-top:4px;">Demo trust signals and fictional profile for class prototype use.</div>
      `;
    }

    protoEls.bookingTasks.innerHTML = bookingTaskTemplates.map(label => `
      <label class="proto-task-chip">
        <input type="checkbox" data-booking-task="${escapeHtml(label)}" ${state.ui.booking.tasks[label] ? 'checked' : ''}>
        <span>${escapeHtml(label)}</span>
      </label>
    `).join('');

    const selectedTasks = bookingTaskTemplates.filter(t => state.ui.booking.tasks[t]);
    const startIso = state.ui.booking.startLocal ? new Date(state.ui.booking.startLocal).toISOString() : null;
    const endIso = state.ui.booking.endLocal ? new Date(state.ui.booking.endLocal).toISOString() : null;
    const startDate = state.ui.booking.startLocal ? new Date(state.ui.booking.startLocal) : null;
    const endDate = state.ui.booking.endLocal ? new Date(state.ui.booking.endLocal) : null;
    const scheduleValid = !!(startDate && endDate && !Number.isNaN(startDate.getTime()) && !Number.isNaN(endDate.getTime()) && endDate > startDate);
    const durationHours = scheduleValid ? diffHours(startIso, endIso) : 0;
    const baseRate = caregiver ? caregiver.hourlyRate : 0;
    const estimatedCare = Math.round(durationHours * baseRate);
    const serviceFee = estimatedCare ? Math.max(8, Math.round(estimatedCare * 0.1)) : 0;
    const totalEstimate = estimatedCare + serviceFee;
    const steps = [
      { title: 'Caregiver', desc: caregiver ? 'Selected' : 'Choose profile', done: !!caregiver },
      { title: 'Schedule', desc: scheduleValid ? `${durationHours}h shift` : 'Set start/end', done: scheduleValid },
      { title: 'Tasks', desc: selectedTasks.length ? `${selectedTasks.length} chosen` : 'Pick tasks', done: selectedTasks.length > 0 },
      { title: 'Confirm', desc: caregiver && scheduleValid ? 'Ready to book' : 'Complete setup', done: caregiver && scheduleValid }
    ];
    const activeIndex = steps.findIndex(step => !step.done);

    protoEls.bookingStepper.innerHTML = steps.map((step, idx) => `
      <div class="proto-step ${step.done ? 'done' : ''} ${idx === activeIndex ? 'active' : ''}">
        <strong>${idx + 1}. ${escapeHtml(step.title)}</strong>
        <span>${escapeHtml(step.desc)}</span>
      </div>
    `).join('');

    const validationMessages = [];
    if (!caregiver) validationMessages.push('Select a caregiver match.');
    if (!scheduleValid) validationMessages.push('Choose a valid start/end time (end must be after start).');
    if (scheduleValid && durationHours > 8) validationMessages.push('Prototype tip: keep demo shifts under 8 hours for classroom flow.');
    if (selectedTasks.length === 0) validationMessages.push('No tasks selected. A default companionship task will be added if you confirm.');

    const readyToBook = !!caregiver && scheduleValid;
    protoEls.bookingValidation.className = `proto-validation ${readyToBook ? 'ok' : ''}`;
    protoEls.bookingValidation.innerHTML = readyToBook
      ? `Booking is ready. This will create a trackable visit in both the family dashboard and caregiver workflow.`
      : validationMessages.join('<br>');

    protoEls.bookingQuote.innerHTML = `
      <div class="proto-inline" style="justify-content:space-between;">
        <strong>Booking estimate</strong>
        <span class="proto-pill ${readyToBook ? 'green' : 'amber'}">${readyToBook ? 'Ready' : 'Needs info'}</span>
      </div>
      <div class="proto-quote-row"><span>Visit type</span><strong>${escapeHtml(visitTypeLabels[state.ui.booking.visitType] || 'Daytime check-in')}</strong></div>
      <div class="proto-quote-row"><span>Shift duration</span><strong>${scheduleValid ? `${durationHours} hours` : '--'}</strong></div>
      <div class="proto-quote-row"><span>Caregiver rate</span><strong>${caregiver ? `${formatCurrency(caregiver.hourlyRate)}/hr` : '--'}</strong></div>
      <div class="proto-quote-row"><span>Estimated care cost</span><strong>${scheduleValid && caregiver ? formatCurrency(estimatedCare) : '--'}</strong></div>
      <div class="proto-quote-row"><span>Platform fee (demo)</span><strong>${scheduleValid && caregiver ? formatCurrency(serviceFee) : '--'}</strong></div>
      <div class="proto-divider"></div>
      <div class="proto-quote-row"><span>Total estimate</span><strong>${scheduleValid && caregiver ? formatCurrency(totalEstimate) : '--'}</strong></div>
      <div class="proto-caption">Demo only. No payments are processed in this class prototype.</div>
    `;

    protoEls.bookingSummary.innerHTML = caregiver
      ? `
          <strong>Booking summary</strong><br>
          ${escapeHtml(caregiver.name)} with ${escapeHtml(recipient.name)}<br>
          ${scheduleValid ? `${escapeHtml(formatDateTime(startIso))} ¬∑ ${escapeHtml(formatRange(startIso, endIso))}` : 'Select a valid time range'}<br>
          ${selectedTasks.length || 1} requested tasks ¬∑ ${escapeHtml(visitTypeLabels[state.ui.booking.visitType] || 'Daytime check-in')}<br>
          <span class="proto-caption">Non-medical home care coordination visit for classroom demo</span>
        `
      : 'Booking summary will appear here.';

    const lastBooked = state.ui.lastBookedVisitId ? getVisit(state.ui.lastBookedVisitId) : null;
    if (lastBooked && state.ui.lastBookedAt) {
      const bookedCaregiver = getCaregiver(lastBooked.caregiverId);
      protoEls.bookingSuccess.classList.remove('proto-hidden');
      protoEls.bookingSuccess.innerHTML = `
        <strong>Booking created</strong><br>
        ${escapeHtml(bookedCaregiver ? bookedCaregiver.name : 'Caregiver')} ¬∑ ${escapeHtml(formatDateTime(lastBooked.scheduledStart))}<br>
        Saved ${escapeHtml(formatDateTime(state.ui.lastBookedAt))}. Open the caregiver view to continue the workflow.
      `;
    } else {
      protoEls.bookingSuccess.classList.add('proto-hidden');
      protoEls.bookingSuccess.textContent = '';
    }
  }

  function renderFamilyDashboard() {
    const stats = getStats();
    protoEls.metrics.innerHTML = `
      <div class="proto-metric"><strong>${stats.completedVisits}</strong><span>Visits completed</span></div>
      <div class="proto-metric"><strong>${stats.onTimeCheckIns}</strong><span>On-time check-ins</span></div>
      <div class="proto-metric"><strong>${stats.completionRate}%</strong><span>Checklist completion</span></div>
    `;

    const sortedVisits = sortVisitsByStartAsc(state.visits);
    protoEls.familyVisitList.innerHTML = sortedVisits.map(v => {
      const caregiver = getCaregiver(v.caregiverId);
      const recipient = getRecipient(v.recipientId);
      return `
        <li class="proto-visit-item ${state.ui.familyVisitId === v.id ? 'active' : ''}" data-family-visit-id="${v.id}">
          <div class="proto-visit-main">
            <strong>${escapeHtml((caregiver ? caregiver.name : 'Caregiver'))} with ${escapeHtml((recipient ? recipient.name : 'Recipient'))}</strong>
            <span>${escapeHtml(formatDate(v.scheduledStart))} ¬∑ ${escapeHtml(formatRange(v.scheduledStart, v.scheduledEnd))}</span>
          </div>
          <span class="proto-status ${v.status}">${v.status.replace('_', ' ')}</span>
        </li>`;
    }).join('');

    const notifications = sortByCreatedDesc(state.notifications, 'createdAt').slice(0, 6);
    protoEls.notificationsList.innerHTML = notifications.length ? notifications.map(n => `
      <div class="proto-notification ${n.read ? 'read' : ''}">
        <div class="proto-small">${escapeHtml(n.message)}</div>
        <div class="proto-inline">
          <span class="proto-caption">${escapeHtml(formatDateTime(n.createdAt))}</span>
          ${!n.read ? `<button type="button" class="proto-btn" data-notif-read="${n.id}">Mark read</button>` : ''}
        </div>
      </div>
    `).join('') : '<div class="proto-empty">No notifications yet.</div>';
  }

  function renderFamilyDetail() {
    const visit = getVisit(state.ui.familyVisitId) || state.visits[0];
    if (!visit) {
      protoEls.familyDetail.innerHTML = '<div class="proto-empty">No visit selected.</div>';
      return;
    }
    state.ui.familyVisitId = visit.id;
    const caregiver = getCaregiver(visit.caregiverId);
    const recipient = getRecipient(visit.recipientId);
    const existingReview = state.reviews.find(r => r.visitId === visit.id);
    const reviewDraft = state.ui.reviewDrafts[visit.id] || { rating: 5, comment: 'Clear updates and dependable communication.' };
    const canReview = visit.status === 'completed' && !!visit.summary && !existingReview;

    protoEls.familyDetail.innerHTML = `
      <div class="proto-stack">
        <div class="proto-summary-box">
          <div class="proto-inline" style="justify-content:space-between;">
            <strong>${escapeHtml(caregiver ? caregiver.name : 'Caregiver')} with ${escapeHtml(recipient ? recipient.name : 'Recipient')}</strong>
            <span class="proto-status ${visit.status} large">${visit.status.replace('_', ' ')}</span>
          </div>
          <div class="proto-caption" style="margin-top:6px;">${escapeHtml(formatDateTime(visit.scheduledStart))} ¬∑ ${escapeHtml(formatRange(visit.scheduledStart, visit.scheduledEnd))}</div>
          ${visit.specialNotes ? `<div class="proto-small" style="margin-top:8px;"><strong>Family note:</strong> ${escapeHtml(visit.specialNotes)}</div>` : ''}
        </div>

        <div class="proto-detail-tabs">
          <span>Progress</span><span>Checklist</span><span>Notes</span><span>Summary</span><span>Review</span>
        </div>

        <div>
          <div class="proto-section-title">Progress timeline</div>
          <ul class="proto-timeline">
            ${[...visit.timeline].sort((a,b)=> new Date(a.timestamp)-new Date(b.timestamp)).map(evt => `
              <li><div class="proto-dot"></div><div><div class="proto-small">${escapeHtml(evt.message)}</div><div class="proto-caption">${escapeHtml(formatDateTime(evt.timestamp))}</div></div></li>
            `).join('')}
          </ul>
        </div>

        <div>
          <div class="proto-section-title">Checklist</div>
          <ul class="proto-checklist">
            ${visit.tasks.map(t => `
              <li class="${t.completed ? 'done' : ''}">
                <label><input type="checkbox" disabled ${t.completed ? 'checked' : ''}> <span>${escapeHtml(t.label)}</span></label>
                ${t.completedAt ? `<small>Completed at ${escapeHtml(formatTime(t.completedAt))}</small>` : ''}
              </li>
            `).join('')}
          </ul>
        </div>

        <div>
          <div class="proto-section-title">Caregiver notes</div>
          ${visit.notes.length ? `<ul class="proto-note-list">
            ${visit.notes.map(n => `<li><div class="proto-small">${escapeHtml(n.text)}</div><div class="proto-caption">${escapeHtml(formatDateTime(n.createdAt))}</div></li>`).join('')}
          </ul>` : '<div class="proto-empty">No caregiver notes yet.</div>'}
        </div>

        <div>
          <div class="proto-section-title">End-of-visit summary</div>
          ${visit.summary
            ? `<div class="proto-summary-box"><div class="proto-small">${escapeHtml(visit.summary.text)}</div><div class="proto-caption" style="margin-top:6px;">Submitted ${escapeHtml(formatDateTime(visit.summary.submittedAt))}</div></div>`
            : '<div class="proto-empty">Waiting for caregiver check-out and summary submission.</div>'}
        </div>

        <div>
          <div class="proto-section-title">Review</div>
          ${existingReview ? `
            <div class="proto-summary-box">
              <div class="proto-small"><strong>${existingReview.rating}/5 stars</strong> ¬∑ ${escapeHtml(existingReview.comment)}</div>
              <div class="proto-caption" style="margin-top:6px;">Submitted ${escapeHtml(formatDateTime(existingReview.createdAt))}</div>
            </div>
          ` : `
            <div class="proto-stack">
              <div class="proto-inline">
                <span class="proto-caption">Rating</span>
                <div class="proto-review-stars" data-review-stars="${visit.id}">
                  ${[1,2,3,4,5].map(num => `<button type="button" class="proto-star ${reviewDraft.rating >= num ? 'active' : ''}" data-review-star="${num}" data-review-visit-id="${visit.id}" ${!canReview ? 'disabled' : ''}>‚òÖ</button>`).join('')}
                </div>
              </div>
              <div>
                <label class="proto-label" for="review-${visit.id}">Comment</label>
                <textarea id="review-${visit.id}" class="proto-textarea" rows="3" data-review-comment="${visit.id}" ${!canReview ? 'disabled' : ''}>${escapeHtml(reviewDraft.comment || '')}</textarea>
              </div>
              <div class="proto-actions">
                <button type="button" class="proto-btn primary" data-review-submit="${visit.id}" ${!canReview ? 'disabled' : ''}>Submit review</button>
              </div>
              ${!canReview ? '<div class="proto-caption">Review unlocks after check-out and summary submission.</div>' : ''}
            </div>
          `}
        </div>
      </div>
    `;
  }

  function renderCaregiverSchedule() {
    const sorted = sortVisitsByStartAsc(state.visits);
    protoEls.caregiverVisitList.innerHTML = sorted.map(v => {
      const caregiver = getCaregiver(v.caregiverId);
      const recipient = getRecipient(v.recipientId);
      return `
        <li class="proto-visit-item ${state.ui.caregiverVisitId === v.id ? 'active' : ''}" data-caregiver-visit-id="${v.id}">
          <div class="proto-visit-main">
            <strong>${escapeHtml(recipient ? recipient.name : 'Recipient')} ¬∑ ${escapeHtml(caregiver ? caregiver.name : 'Caregiver')}</strong>
            <span>${escapeHtml(formatDate(v.scheduledStart))} ¬∑ ${escapeHtml(formatRange(v.scheduledStart, v.scheduledEnd))}</span>
          </div>
          <span class="proto-status ${v.status}">${v.status.replace('_', ' ')}</span>
        </li>`;
    }).join('');
  }

  function renderCaregiverWorkflow() {
    const visit = getVisit(state.ui.caregiverVisitId) || state.visits[0];
    if (!visit) {
      protoEls.caregiverWorkflow.innerHTML = '<div class="proto-empty">No visit selected.</div>';
      return;
    }
    state.ui.caregiverVisitId = visit.id;
    const caregiver = getCaregiver(visit.caregiverId);
    const recipient = getRecipient(visit.recipientId);
    const completedCount = visit.tasks.filter(t => t.completed).length;
    protoEls.caregiverWorkflow.innerHTML = `
      <div class="proto-stack">
        <div class="proto-summary-box">
          <div class="proto-inline" style="justify-content:space-between;">
            <strong>${escapeHtml(caregiver ? caregiver.name : 'Caregiver')} supporting ${escapeHtml(recipient ? recipient.name : 'Recipient')}</strong>
            <span class="proto-status ${visit.status}">${visit.status.replace('_', ' ')}</span>
          </div>
          <div class="proto-caption" style="margin-top:6px;">${escapeHtml(formatDateTime(visit.scheduledStart))}</div>
        </div>

        <div class="proto-actions">
          <button type="button" class="proto-btn primary" data-check-in="${visit.id}" ${visit.status !== 'scheduled' ? 'disabled' : ''}>Check in</button>
          <button type="button" class="proto-btn" data-check-out="${visit.id}" ${(visit.status !== 'in_progress' || completedCount < 1) ? 'disabled' : ''}>Check out + summary</button>
          <button type="button" class="proto-btn" data-open-family-from-caregiver="${visit.id}">Open in family view</button>
        </div>
        <div class="proto-caption">Prototype rule: at least one completed checklist task is required before check-out.</div>

        <div>
          <div class="proto-section-title">Checklist (${completedCount}/${visit.tasks.length})</div>
          <ul class="proto-checklist">
            ${visit.tasks.map(t => `
              <li class="${t.completed ? 'done' : ''}">
                <label>
                  <input type="checkbox" data-caregiver-task-toggle="${t.id}" data-visit-id="${visit.id}" ${t.completed ? 'checked' : ''} ${visit.status === 'completed' ? 'disabled' : ''}>
                  <span>${escapeHtml(t.label)}</span>
                </label>
                ${t.completedAt ? `<small>Completed at ${escapeHtml(formatTime(t.completedAt))}</small>` : ''}
              </li>
            `).join('')}
          </ul>
        </div>

        <div>
          <label class="proto-label" for="protoCaregiverNoteInput">Caregiver note</label>
          <textarea id="protoCaregiverNoteInput" class="proto-textarea" rows="3" ${visit.status === 'completed' ? 'disabled' : ''}>${escapeHtml(state.ui.caregiverDraftNote || '')}</textarea>
          <div class="proto-actions" style="margin-top:8px;">
            <button type="button" class="proto-btn" data-caregiver-note-submit="${visit.id}" ${visit.status === 'completed' ? 'disabled' : ''}>Submit update</button>
          </div>
        </div>
      </div>
    `;
  }

  function renderCaregiverTimeline() {
    const visit = getVisit(state.ui.caregiverVisitId) || state.visits[0];
    if (!visit) {
      protoEls.caregiverTimeline.innerHTML = '<div class="proto-empty">No visit selected.</div>';
      return;
    }
    protoEls.caregiverTimeline.innerHTML = `
      <ul class="proto-timeline">
        ${[...visit.timeline].sort((a,b)=> new Date(a.timestamp)-new Date(b.timestamp)).map(evt => `
          <li><div class="proto-dot"></div><div><div class="proto-small">${escapeHtml(evt.message)}</div><div class="proto-caption">${escapeHtml(formatDateTime(evt.timestamp))}</div></div></li>
        `).join('')}
      </ul>
    `;
  }

  function renderCaregiverFamilyPreview() {
    const visit = getVisit(state.ui.caregiverVisitId) || state.visits[0];
    if (!visit) {
      protoEls.caregiverFamilyPreview.innerHTML = '<div class="proto-empty">No visit selected.</div>';
      return;
    }
    const existingReview = state.reviews.find(r => r.visitId === visit.id);
    protoEls.caregiverFamilyPreview.innerHTML = `
      <div class="proto-stack">
        <div class="proto-inline">
          <span class="proto-pill ${visit.status === 'completed' ? 'green' : visit.status === 'in_progress' ? 'amber' : 'blue'}">${visit.status.replace('_', ' ')}</span>
          <span class="proto-caption">${visit.tasks.filter(t => t.completed).length}/${visit.tasks.length} tasks completed</span>
        </div>
        ${visit.summary
          ? `<div class="proto-summary-box"><div class="proto-small">${escapeHtml(visit.summary.text)}</div><div class="proto-caption" style="margin-top:6px;">Summary ready ¬∑ family can review now</div></div>`
          : '<div class="proto-empty">Summary not available yet. Check out the visit to unlock family review.</div>'}
        ${existingReview
          ? `<div class="proto-summary-box"><div class="proto-small"><strong>Family review:</strong> ${existingReview.rating}/5 ¬∑ ${escapeHtml(existingReview.comment)}</div></div>`
          : '<div class="proto-caption">No family review submitted yet.</div>'}
      </div>
    `;
  }

  function wirePrototypeEvents() {
    [protoEls.roleFamily, protoEls.roleCaregiver].forEach(btn => {
      btn.addEventListener('click', () => updateRole(btn.dataset.role));
    });

    protoEls.resetBtn.addEventListener('click', () => {
      state = createSeedState();
      persistProtoState();
      setLiveMessage('Demo state reset. You can run the class demo flow again from the beginning.');
      renderPrototype();
    });

    protoEls.filterAvailability.addEventListener('change', (e) => {
      state.ui.filters.availability = e.target.value;
      persistProtoState();
      renderPrototype();
    });
    protoEls.filterService.addEventListener('change', (e) => {
      state.ui.filters.service = e.target.value;
      persistProtoState();
      renderPrototype();
    });
    protoEls.filterRating.addEventListener('change', (e) => {
      state.ui.filters.minRating = Number(e.target.value);
      persistProtoState();
      renderPrototype();
    });

    protoEls.matchesList.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-action="select-caregiver"]');
      if (!btn) return;
      state.ui.selectedCaregiverId = btn.dataset.caregiverId;
      setLiveMessage(`${getCaregiver(state.ui.selectedCaregiverId)?.name || 'Caregiver'} selected for booking.`);
      persistProtoState();
      renderPrototype();
    });

    protoEls.bookingTasks.addEventListener('change', (e) => {
      const input = e.target.closest('[data-booking-task]');
      if (!input) return;
      state.ui.booking.tasks[input.dataset.bookingTask] = !!input.checked;
      persistProtoState();
      renderPrototype();
    });

    protoEls.bookStart.addEventListener('change', e => {
      state.ui.booking.startLocal = e.target.value;
      persistProtoState();
      renderPrototype();
    });
    protoEls.bookEnd.addEventListener('change', e => {
      state.ui.booking.endLocal = e.target.value;
      persistProtoState();
      renderPrototype();
    });
    if (protoEls.bookVisitType) {
      protoEls.bookVisitType.addEventListener('change', e => {
        state.ui.booking.visitType = e.target.value;
        persistProtoState();
        renderPrototype();
      });
    }
    protoEls.bookNotes.addEventListener('change', e => {
      state.ui.booking.notes = e.target.value;
      persistProtoState();
      renderPrototype();
    });
    protoEls.confirmBooking.addEventListener('click', confirmBooking);

    protoEls.familyView.addEventListener('click', (e) => {
      const presetBtn = e.target.closest('[data-book-preset]');
      if (presetBtn) {
        applyBookingPreset(presetBtn.dataset.bookPreset);
        return;
      }
      const taskPresetBtn = e.target.closest('[data-task-preset]');
      if (taskPresetBtn) {
        applyTaskPreset(taskPresetBtn.dataset.taskPreset);
      }
    });

    protoEls.familyVisitList.addEventListener('click', (e) => {
      const row = e.target.closest('[data-family-visit-id]');
      if (!row) return;
      state.ui.familyVisitId = row.dataset.familyVisitId;
      persistProtoState();
      renderPrototype();
    });

    protoEls.notificationsList.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-notif-read]');
      if (!btn) return;
      markNotifRead(btn.dataset.notifRead);
    });

    protoEls.familyDetail.addEventListener('click', (e) => {
      const starBtn = e.target.closest('[data-review-star]');
      if (starBtn) {
        const visitId = starBtn.dataset.reviewVisitId;
        const rating = Number(starBtn.dataset.reviewStar);
        state.ui.reviewDrafts[visitId] = state.ui.reviewDrafts[visitId] || { rating: 5, comment: 'Clear updates and dependable communication.' };
        state.ui.reviewDrafts[visitId].rating = rating;
        persistProtoState();
        renderPrototype();
        return;
      }
      const submitBtn = e.target.closest('[data-review-submit]');
      if (submitBtn) {
        const visitId = submitBtn.dataset.reviewSubmit;
        const draft = state.ui.reviewDrafts[visitId] || { rating: 5, comment: '' };
        submitReview(visitId, draft.rating || 5, draft.comment || '');
      }
    });

    protoEls.familyDetail.addEventListener('input', (e) => {
      const area = e.target.closest('[data-review-comment]');
      if (!area) return;
      const visitId = area.dataset.reviewComment;
      state.ui.reviewDrafts[visitId] = state.ui.reviewDrafts[visitId] || { rating: 5, comment: '' };
      state.ui.reviewDrafts[visitId].comment = area.value;
      persistProtoState();
    });

    protoEls.caregiverVisitList.addEventListener('click', (e) => {
      const row = e.target.closest('[data-caregiver-visit-id]');
      if (!row) return;
      state.ui.caregiverVisitId = row.dataset.caregiverVisitId;
      persistProtoState();
      renderPrototype();
    });

    protoEls.caregiverWorkflow.addEventListener('click', (e) => {
      const checkInBtn = e.target.closest('[data-check-in]');
      if (checkInBtn) return checkInVisit(checkInBtn.dataset.checkIn);

      const checkOutBtn = e.target.closest('[data-check-out]');
      if (checkOutBtn) return checkOutAndSubmitSummary(checkOutBtn.dataset.checkOut);

      const noteBtn = e.target.closest('[data-caregiver-note-submit]');
      if (noteBtn) return addVisitNote(noteBtn.dataset.caregiverNoteSubmit, state.ui.caregiverDraftNote || '');

      const openFamilyBtn = e.target.closest('[data-open-family-from-caregiver]');
      if (openFamilyBtn) {
        state.ui.familyVisitId = openFamilyBtn.dataset.openFamilyFromCaregiver;
        updateRole('family');
      }
    });

    protoEls.caregiverWorkflow.addEventListener('change', (e) => {
      const toggle = e.target.closest('[data-caregiver-task-toggle]');
      if (!toggle) return;
      toggleVisitTask(toggle.dataset.visitId, toggle.dataset.caregiverTaskToggle, !!toggle.checked);
    });

    protoEls.caregiverWorkflow.addEventListener('input', (e) => {
      if (e.target.id === 'protoCaregiverNoteInput') {
        state.ui.caregiverDraftNote = e.target.value;
        persistProtoState();
      }
    });
  }

  /* Make marketing booking form behave like a prototype lead capture */
  (function enhanceMarketingForm() {
    const submitBtn = document.querySelector('.form-submit');
    const bookSection = document.getElementById('book');
    if (!submitBtn || !bookSection) return;
    submitBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const inputs = bookSection.querySelectorAll('input, select, textarea');
      let valid = true;
      inputs.forEach(el => {
        if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.type !== 'tel' && !el.value.trim()) {
          valid = false;
          el.style.borderColor = '#E15E5E';
        } else {
          el.style.borderColor = '';
        }
      });
      if (!valid) {
        setLiveMessage('Please complete the booking request form fields before submitting.');
        return;
      }
      openModal();
      setLiveMessage('Marketing request form submitted. The interactive prototype is also available in the Prototype Demo section.');
    });
  })();

  wirePrototypeEvents();
  renderPrototype();
</script>
</body>
</html>
